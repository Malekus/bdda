SQL> PROMPT =========================================================
=========================================================
SQL> -- Nom du Cas       :  Gestion Commerciale Intelligente : GESCOMI : GCI
SQL> -- Nom de SGBD      :  ORACLE DBMS                    
SQL> -- Date de création :  Septembre 2018
SQL> -- Auteur           :  Faouzi BOUFARES 
SQL> -- Université       :  Université Sorbonne Paris Cité, Université Paris 13 
SQL> -- Formation        :  Master 2 EID 2  
SQL> PROMPT =========================================================
=========================================================
SQL> PROMPT 

SQL> PROMPT =========================================================
=========================================================
SQL> PROMPT |                                                       |
|                                                       |
SQL> PROMPT |     Exercice 2 :  BD GESCOMI avec SQL 2               |
|     Exercice 2 :  BD GESCOMI avec SQL 2               |
SQL> PROMPT |     Enrichissement du schéma d une BD :               |
|     Enrichissement du schéma d une BD :               |
SQL> PROMPT |                                                       |
|                                                       |
SQL> PROMPT =========================================================
=========================================================
SQL> PROMPT

SQL> PROMPT

SQL> PROMPT =========================================================
=========================================================
SQL> PROMPT Ceci permet d initialiser le type de la date
Ceci permet d initialiser le type de la date
SQL> PROMPT =========================================================
=========================================================
SQL> ALTER SESSION SET NLS_DATE_FORMAT = 'DAY DD-MONTH-YYYY' ;

Session modifié(e).

SQL> ALTER SESSION SET NLS_DATE_LANGUAGE = 'ENGLISH' ;

Session modifié(e).

SQL> --ALTER SESSION SET NLS_DATE_LANGUAGE = 'AMERICAN' ;
SQL> PROMPT =========================================================
=========================================================
SQL> -- ===============================================================================
SQL> -- Définition de la structure des données ================= DEBUT    =============
SQL> -- en SQL 2 ======================================================================
SQL> -- Création des tables ============= Magasin FR01 ====== PARIS   =================
SQL> PROMPT Destruction des tables de la bd GESCOMI EN SQL 2
Destruction des tables de la bd GESCOMI EN SQL 2
SQL> PROMPT =========================================================
=========================================================
SQL> PROMPT

SQL> DROP TABLE DETAILCOM;

Table DETAILCOM supprimé(e).

SQL> DROP TABLE ARTICLES;

Table ARTICLES supprimé(e).

SQL> DROP TABLE COMMANDES;

Table COMMANDES supprimé(e).

SQL> DROP TABLE CLIENTS;

Table CLIENTS supprimé(e).

SQL> PROMPT

SQL> --Pause Tapez sur Enter...
SQL> PROMPT

SQL> PROMPT =========================================================
=========================================================
SQL> PROMPT Création des tables de la bd GESCOMI EN SQL 2
Création des tables de la bd GESCOMI EN SQL 2
SQL> PROMPT =========================================================
=========================================================
SQL> PROMPT

SQL> PROMPT =========================================================
=========================================================
SQL> PROMPT >> Table : CLIENTS                                             
>> Table : CLIENTS
SQL> PROMPT =========================================================
=========================================================
SQL> PROMPT

SQL> CREATE TABLE CLIENTS
(
	CODCLI		VARCHAR2(10), 
	CIVCLI		VARCHAR2(12),
	NOMCLI		VARCHAR2(20),
	PRENCLI		VARCHAR2(20),
	CATCLI		NUMBER(1),
	ADNCLI		VARCHAR2(10),
	ADRCLI		VARCHAR2(50),
	CPCLI		VARCHAR2(10),
	VILCLI		VARCHAR2(20),
	PAYSCLI		VARCHAR2(30),
	MAILCLI		VARCHAR2(30),
	TELCLI		VARCHAR2(20),
	CONSTRAINT PK_CLIENTS			PRIMARY KEY(CODCLI),
	CONSTRAINT CK_CLIENTS_CIVCLI		CHECK(CIVCLI IN ('Mademoiselle', 'Madame', 'Monsieur')),
	CONSTRAINT CK_CLIENTS_CATCLI		CHECK(CATCLI BETWEEN 1 and 7),
	CONSTRAINT NN_CLIENTS_NOMCLI		CHECK(NOMCLI IS NOT NULL),
	CONSTRAINT NN_CLIENTS_PRENCLI		CHECK(PRENCLI IS NOT NULL),
	CONSTRAINT NN_CLIENTS_CATCLI		CHECK(CATCLI IS NOT NULL),
	CONSTRAINT CK_CLIENTS_VILCLI		CHECK(VILCLI = UPPER(VILCLI)),
	CONSTRAINT CK_CLIENTS_PAYSCLI		CHECK(PAYSCLI = UPPER(PAYSCLI))
);

Table CLIENTS créé(e).

SQL> PROMPT

SQL> --Pause Tapez sur Enter...
SQL> PROMPT

SQL> PROMPT =========================================================
=========================================================
SQL> PROMPT >> Table : COMMANDES
>> Table : COMMANDES
SQL> PROMPT =========================================================
=========================================================
SQL> PROMPT

SQL> CREATE TABLE COMMANDES
(
	NUMCOM 		VARCHAR2(10), 
	CODCLI		VARCHAR2(10),
	DATCOM		DATE,
	CONSTRAINT PK_COMMANDES				PRIMARY KEY(NUMCOM),
	CONSTRAINT NN_COMMANDES_DATCOM			CHECK(DATCOM IS NOT NULL),
	CONSTRAINT FK_COMMANDES_CODCLI_CLIENTS	FOREIGN KEY(CODCLI)	REFERENCES CLIENTS(CODCLI)
);

Table COMMANDES créé(e).

SQL> PROMPT

SQL> --Pause Tapez sur Enter...
SQL> PROMPT

SQL> PROMPT =========================================================
=========================================================
SQL> PROMPT >> Table : ARTICLES
>> Table : ARTICLES
SQL> PROMPT =========================================================
=========================================================
SQL> PROMPT

SQL> CREATE TABLE ARTICLES
(
	REFART 		VARCHAR2(10), 
	NOMART		VARCHAR2(50),
	PVART		NUMBER(10, 2),
	QSART		NUMBER(3),
	PAART		NUMBER(10, 2),
	CONSTRAINT PK_ARTICLES			PRIMARY KEY(REFART),
	CONSTRAINT NN_ARTICLES_NOMART		CHECK(NOMART IS NOT NULL),
	CONSTRAINT CK_ARTICLES_QSART		CHECK(QSART < 1000)
);

Table ARTICLES créé(e).

SQL> PROMPT

SQL> --Pause Tapez sur Enter...
SQL> PROMPT

SQL> PROMPT =========================================================
=========================================================
SQL> PROMPT >> Table : DETAILCOM
>> Table : DETAILCOM
SQL> PROMPT =========================================================
=========================================================
SQL> PROMPT

SQL> CREATE TABLE DETAILCOM
(
	NUMCOM 		VARCHAR2(10), 
	REFART		VARCHAR2(10),
	QTCOM		NUMBER(3),
	PUART		NUMBER(10, 2),
	REMISE		NUMBER(4, 2),
	CONSTRAINT PK_DETAILCOM				PRIMARY KEY(NUMCOM, REFART),
	CONSTRAINT CK_DETAILCOM_QTCOM			CHECK(QTCOM < 1000),
	CONSTRAINT NN_DETAILCOM_QTCOM			CHECK(QTCOM IS NOT NULL),
	CONSTRAINT NN_DETAILCOM_PUART			CHECK(PUART IS NOT NULL),
	CONSTRAINT NN_DETAILCOM_REMISE			CHECK(REMISE IS NOT NULL),
	CONSTRAINT FK_DETAILCOM_NUMCOM_COM		FOREIGN KEY(NUMCOM)	REFERENCES COMMANDES(NUMCOM),
	CONSTRAINT FK_DETAILCOM_REFART_ARTICLES	FOREIGN KEY(REFART)	REFERENCES ARTICLES(REFART)
);

Table DETAILCOM créé(e).

SQL> PROMPT

SQL> --Pause Tapez sur Enter...
SQL> -- ===============================================================================
SQL> -- Définition de la structure des données =========== FIN     ====================
SQL> -- en SQL 2 ======================================================================
SQL> -- Enrichissement des données ========================== DEBUT =========================================
SQL> -- Enrichissement des données ==========================================================================
SQL> -- Enrichissement des données ==========================================================================
SQL> PROMPT 

SQL> PROMPT =====================================================================
=====================================================================
SQL> PROMPT |                                                                   |
|                                                                   |
SQL> PROMPT |      Historique des mouvements des articles                       |
|      Historique des mouvements des articles                       |
SQL> PROMPT |                                                                   |
|                                                                   |
SQL> PROMPT =====================================================================
=====================================================================
SQL> PROMPT

SQL> PROMPT

SQL> /*
-- Première proposition pour les déclencheurs

PROMPT =========================================================
PROMPT >> Requete : Trigger sur la mise a jour des prix EN SQL 2
PROMPT =========================================================
PROMPT
TTITLE CENTER 'Requete: Trigger sur la mise à jour des prix' skip 1 -
       LEFT   '=========================================================================' skip 0

PROMPT
PROMPT =========================================================
PROMPT Il est nécessaire de créer une table HISTORIQUE_PRIX qui permet
PROMPT de garder le prix des articles avant leurs mises à jour.
PROMPT C est une table qui aura comme colonne la référence, le nom, le prix
PROMPT d achat, le prix de vente (prix catalogue) de l article avant la mise
PROMPT à jour et la date de la mise à jour.
PROMPT =========================================================
PROMPT
DROP TABLE HISTORIQUE_PRIX;

CREATE TABLE HISTORIQUE_PRIX
(
	REFART 		VARCHAR2(10), 
	NOMART		VARCHAR2(50),
	PVART		NUMBER(10, 2),
	PAART		NUMBER(10, 2),
	DATMAJ		DATE,
	CONSTRAINT	NN_HISTORIQUE_PRIX_NOMART	CHECK(NOMART IS NOT NULL)
);

PROMPT
--Pause Tapez sur Enter...

PROMPT
PROMPT =========================================================
PROMPT Suppression et création du trigger = déclencheur.
PROMPT =========================================================
PROMPT
DROP TRIGGER MAJ_PRIX_ARTICLES;

CREATE OR REPLACE TRIGGER MAJ_PRIX_ARTICLES
	AFTER UPDATE ON ARTICLES
	FOR EACH ROW

DECLARE
	V_REFART	VARCHAR2(10) := :OLD.REFART;
	V_NOMART	VARCHAR2(50) := :OLD.NOMART;
	V_PVART		NUMBER(10, 2) := :OLD.PVART;
	V_PAART		NUMBER(10, 2) := :OLD.PAART;

BEGIN
	INSERT INTO HISTORIQUE_PRIX (REFART, NOMART, PVART, PAART, DATMAJ)
	VALUES (V_REFART, V_NOMART, V_PVART, V_PAART, SYSDATE);
END;
/

*/
SQL> -- Deuxième proposition pour les déclencheurs
SQL> PROMPT

SQL> PROMPT =========================================================
=========================================================
SQL> PROMPT Il est nécessaire de créer une table qui permet
Il est nécessaire de créer une table qui permet
SQL> PROMPT de garder le prix des articles avant leurs mises à jour.
de garder le prix des articles avant leurs mises à jour.
SQL> PROMPT C est une table qui aura comme colonnes la référence, le nom, le prix
C est une table qui aura comme colonnes la référence, le nom, le prix
SQL> PROMPT d achat, le prix de vente (prix catalogue) de l article avant la mise
d achat, le prix de vente (prix catalogue) de l article avant la mise
SQL> PROMPT à jour et la date de la mise à jour.
à jour et la date de la mise à jour.
SQL> PROMPT =========================================================
=========================================================
SQL> PROMPT

SQL> PROMPT

SQL> PROMPT =====================================================================
=====================================================================
SQL> PROMPT Il est nécessaire de créer une table HISTORIQUE_MVTS_ARTICLES.
Il est nécessaire de créer une table HISTORIQUE_MVTS_ARTICLES.
SQL> PROMPT =====================================================================
=====================================================================
SQL> PROMPT

SQL> DROP TABLE HISTORIQUE_MVTS_ARTICLES;

Table HISTORIQUE_MVTS_ARTICLES supprimé(e).

SQL> CREATE TABLE HISTORIQUE_MVTS_ARTICLES
(
	NOMUSER		VARCHAR2(15), 
	TYPEMVT		VARCHAR2(15), 
	REFART 		VARCHAR2(10), 
	NOMART		VARCHAR2(50),
	PVART		NUMBER(10, 2),
	PAART		NUMBER(10, 2),
	QSART		NUMBER(3),
	DATMVT		DATE,
	CONSTRAINT NN_HIST_ARTICLES_NOMART	CHECK(NOMART IS NOT NULL),
	CONSTRAINT NN_HIST_ARTICLES_NOMUSER	CHECK(NOMUSER IS NOT NULL),
	CONSTRAINT NN_HIST_ARTICLES_NOMTYPEMVT	CHECK(TYPEMVT IS NOT NULL)
);

Table HISTORIQUE_MVTS_ARTICLES créé(e).

SQL> PROMPT

SQL> --Pause Tapez sur Enter...
SQL> PROMPT

SQL> PROMPT =====================================================================
=====================================================================
SQL> PROMPT >> Trigger sur les mouvements des articles
>> Trigger sur les mouvements des articles
SQL> PROMPT =====================================================================
=====================================================================
SQL> PROMPT =====================================================================
=====================================================================
SQL> PROMPT Suppression et création du Trigger.
Suppression et création du Trigger.
SQL> PROMPT =====================================================================
=====================================================================
SQL> PROMPT

SQL> DROP TRIGGER MOUVEMENTS_ARTICLES;

Erreur commençant à la ligne: 387 de la commande -
DROP TRIGGER MOUVEMENTS_ARTICLES
Rapport d'erreur -
Erreur SQL : ORA-04080: trigger 'MOUVEMENTS_ARTICLES' does not exist
04080. 00000 -  "trigger '%s' does not exist"
*Cause:    The TRIGGER name is invalid.
*Action:   Check the trigger name.
SQL> CREATE OR REPLACE TRIGGER MOUVEMENTS_ARTICLES
	AFTER UPDATE OR INSERT OR DELETE ON ARTICLES
	FOR EACH ROW
DECLARE
	V_REFART	VARCHAR2(10)	:= :OLD.REFART;
	V_NOMART	VARCHAR2(50)	:= :OLD.NOMART;
	V_PVART		NUMBER(10, 2)	:= :OLD.PVART;
	V_PAART		NUMBER(10, 2)	:= :OLD.PAART;
	V_QSART		NUMBER(3)	:= :OLD.QSART;

	VI_REFART	VARCHAR2(10)	:= :NEW.REFART;
	VI_NOMART	VARCHAR2(50)	:= :NEW.NOMART;
	VI_PVART	NUMBER(10, 2)	:= :NEW.PVART;
	VI_PAART	NUMBER(10, 2)	:= :NEW.PAART;
	VI_QSART	NUMBER(3)	:= :NEW.QSART;
	
BEGIN
	IF UPDATING THEN
		INSERT INTO HISTORIQUE_MVTS_ARTICLES (NOMUSER, TYPEMVT, REFART, NOMART, PVART, PAART, QSART, DATMVT)
		VALUES (USER, 'UPDATE', V_REFART, V_NOMART, V_PVART, V_PAART, V_QSART, SYSDATE);
	END IF;

	IF DELETING THEN 
		INSERT INTO HISTORIQUE_MVTS_ARTICLES (NOMUSER, TYPEMVT, REFART, NOMART, PVART, PAART, QSART, DATMVT)
		VALUES (USER, 'DELETE', V_REFART, V_NOMART, V_PVART, V_PAART, V_QSART, SYSDATE);
	END IF;
			
	IF INSERTING THEN 
		INSERT INTO HISTORIQUE_MVTS_ARTICLES (NOMUSER, TYPEMVT, REFART, NOMART, PVART, PAART, QSART, DATMVT)
		VALUES (USER, 'INSERT', VI_REFART, VI_NOMART, VI_PVART, VI_PAART, VI_QSART, SYSDATE);
	END IF;
END;
/

Elément Trigger MOUVEMENTS_ARTICLES compilé

SQL> /*

-- Enrichissement du schéma d'une BD : =====================================>>>>>>>

-- Création des accélérateurs des traitements : Les index ==================>>>>>>>

CREATE INDEX ndexcli ... ;

-- Création des rôles et des profils qui seront affectés aux utilisateurs ===>>>>>>
-- Partage de données

CREATE ROLE...
CREATE PROFILE...

-- COMMENT ou NO-COMMENT ? =================================================>>>>>>>
-- Commenter avec SQL (les commentaires seront stockés dans le dictionnaire du SGBD)
-- vos tables et vos colonnes : il s'agit des méta-informations (méta-données) très utiles
-- pour les autres utilisateurs

-- COMMENT ou NO-COMMENT ? =================================================>>>>>>>
-- Déclenchement d'actions automatiques pour garder trace de toutes les mises à jour
-- des données, grader plusieurs versions...
-- Développer le nécessaire pour tracer tous les changements effectués dans la table des Clients !
-- Ceci pourrait permettre de faire un meilleur suivi de la clientèle...

*/
SQL> PROMPT

SQL> PROMPT =========================================================
=========================================================
SQL> PROMPT Il est nécessaire de créer une table qui permet
Il est nécessaire de créer une table qui permet
SQL> PROMPT de garder toutes les données sur les clients avant leurs mises à jour.
de garder toutes les données sur les clients avant leurs mises à jour.
SQL> PROMPT C est une table qui aura comme colonnes toutes celles de départ avant la mise
C est une table qui aura comme colonnes toutes celles de départ avant la mise
SQL> PROMPT à jour et la date de la mise à jour, l''utilisateur ayant fait la lise à jour, etc...
à jour et la date de la mise à jour, l''utilisateur ayant fait la lise à jour, etc...
SQL> PROMPT =========================================================
=========================================================
SQL> PROMPT

SQL> PROMPT

SQL> PROMPT =====================================================================
=====================================================================
SQL> PROMPT Il est nécessaire de créer une table HISTORIQUE_MVTS_CLIENTS.
Il est nécessaire de créer une table HISTORIQUE_MVTS_CLIENTS.
SQL> PROMPT =====================================================================
=====================================================================
SQL> PROMPT

SQL> /*
DROP TABLE HISTORIQUE_MVTS_CLIENTS;


CREATE TABLE HISTORIQUE_MVTS_CLIENTS
(
------------ à vous de compléter
);

PROMPT
--Pause Tapez sur Enter...
PROMPT
*/
SQL> -- Enrichissement des données ========================== FIN ===========================================
SQL> -- Enrichissement des données ==========================================================================
SQL> -- Enrichissement des données ==========================================================================
SQL> --======================================================================================
SQL> --======================================================================================
SQL> --======================================================================================
SQL> --======================================================================================
SQL> --======================================================================================
SQL> --======================================================================================
SQL> -- MFB FFF +++
SQL> -- ===============================================================================
SQL> -- Définition de la structure des données =========== FIN     ====================
SQL> -- en SQL 2 ======================================================================
SQL> -- ===============================================================================
SQL> -- Insertion des données ============================ DEBUT ======================
SQL> -- en SQL 2 ======================================================================
SQL> -- Insertion des lignes dans les tables ==========================================
SQL> PROMPT

SQL> PROMPT =====================================================================
=====================================================================
SQL> PROMPT Insertion des données de la bd EN SQL 2 POUR UN MAGASIN donné Le FR01 de Paris
Insertion des données de la bd EN SQL 2 POUR UN MAGASIN donné Le FR01 de Paris
SQL> PROMPT =====================================================================
=====================================================================
SQL> PROMPT

SQL> PROMPT =========================================================
=========================================================
SQL> PROMPT >> Insertion dans la Table : CLIENTS
>> Insertion dans la Table : CLIENTS
SQL> PROMPT =========================================================
=========================================================
SQL> PROMPT

SQL> INSERT INTO CLIENTS (CODCLI, CIVCLI, NOMCLI, PRENCLI, CATCLI, ADNCLI, ADRCLI, CPCLI, VILCLI, PAYSCLI, MAILCLI, TELCLI)
VALUES ('C001', 'Madame', 'CLEM@ENT', 'EVE', 1, '18', 'BOULEVARD FOCH', '91000', 'EPINAY-SUR-ORGE', 'FRANCE','eve.clement@gmail.com', '+33777889911');

1 ligne inséré.

SQL> INSERT INTO CLIENTS (CODCLI, CIVCLI, NOMCLI, PRENCLI, CATCLI, ADNCLI, ADRCLI, CPCLI, VILCLI, PAYSCLI, MAILCLI, TELCLI)
VALUES ('C002', 'Madame', 'LESEUL', 'MARIE', 1, '21', 'AVENUE D ITALIE', '75013', 'PARIS', 'FRANCE','marieleseul@yahoo.fr', '0617586565');

1 ligne inséré.

SQL> INSERT INTO CLIENTS (CODCLI, CIVCLI, NOMCLI, PRENCLI, CATCLI, ADNCLI, ADRCLI, CPCLI, VILCLI, PAYSCLI, MAILCLI, TELCLI)
VALUES ('C003', 'Madame', 'UNIQUE', 'MARINE', 2, '77', 'RUE DE LA LIBERTE', '13001', 'MARCHEILLE', 'FRANCE','munique@gmail.com', '+33777889922');

1 ligne inséré.

SQL> INSERT INTO CLIENTS (CODCLI, CIVCLI, NOMCLI, PRENCLI, CATCLI, ADNCLI, ADRCLI, CPCLI, VILCLI, PAYSCLI, MAILCLI, TELCLI)
VALUES ('C004', 'Madame', 'CLEMENCE', 'EVELYNE', 3, '8 BIS', 'BOULEVARD FOCH', '93800', 'EPINAY-SUR-SEINE', 'FRANCE','clemence evelyne@gmail.com', '+33777889933');

1 ligne inséré.

SQL> INSERT INTO CLIENTS (CODCLI, CIVCLI, NOMCLI, PRENCLI, CATCLI, ADNCLI, ADRCLI, CPCLI, VILCLI, PAYSCLI, MAILCLI, TELCLI)
VALUES ('C005', 'Madame', 'FORT', 'JEANNE', 3, '55', 'RUE DU JAPON', '94310', 'ORLY-VILLE', 'FRANCE','jfort\@hotmail.fr', '+33777889944');

1 ligne inséré.

SQL> INSERT INTO CLIENTS (CODCLI, CIVCLI, NOMCLI, PRENCLI, CATCLI, ADNCLI, ADRCLI, CPCLI, VILCLI, PAYSCLI, MAILCLI, TELCLI)
VALUES ('C006', 'Mademoiselle', 'LE BON', 'CLEMENCE', 1, '18', 'BOULEVARD FOCH', '93800', 'EPINAY-SUR-SEINE', 'FRANCE','clemence.le bon@cfo.fr', '0033777889955');

1 ligne inséré.

SQL> INSERT INTO CLIENTS (CODCLI, CIVCLI, NOMCLI, PRENCLI, CATCLI, ADNCLI, ADRCLI, CPCLI, VILCLI, PAYSCLI, MAILCLI, TELCLI)
VALUES ('C007', 'Mademoiselle', 'TRAIFOR', 'ALICE', 2, '6', 'RUE DE LA ROSIERE', '75015', 'PARIS', 'FRANCE','alice.traifor@yahoo.fr', '+33777889966');

1 ligne inséré.

SQL> INSERT INTO CLIENTS (CODCLI, CIVCLI, NOMCLI, PRENCLI, CATCLI, ADNCLI, ADRCLI, CPCLI, VILCLI, PAYSCLI, MAILCLI, TELCLI)
VALUES ('C008', 'Monsieur', 'VIVANT', 'JEAN-BAPTISTE', 1, '13', 'RUE DE LA PAIX', '93800', 'EPINAY-SUR-SEINE', 'FRANCE','jeanbaptiste@', '0607');

1 ligne inséré.

SQL> INSERT INTO CLIENTS (CODCLI, CIVCLI, NOMCLI, PRENCLI, CATCLI, ADNCLI, ADRCLI, CPCLI, VILCLI, PAYSCLI, MAILCLI, TELCLI)
VALUES ('C009', 'Monsieur', 'CLEMENCE', 'ALEXANDRE', 1, '5', 'RUE DE BELLEVILLE', '75019', 'PARIS', 'FRANCE','alexandre.clemence@up13.fr', '+33149404071');

1 ligne inséré.

SQL> INSERT INTO CLIENTS (CODCLI, CIVCLI, NOMCLI, PRENCLI, CATCLI, ADNCLI, ADRCLI, CPCLI, VILCLI, PAYSCLI, MAILCLI, TELCLI)
VALUES ('C010', 'Monsieur', 'TRAIFOR', 'ALEXANDRE', 1, '16', 'AVENUE FOCH', '75016', 'PARIS', 'FRA','alexandre.traifor@up13.fr', '06070809');

1 ligne inséré.

SQL> INSERT INTO CLIENTS (CODCLI, CIVCLI, NOMCLI, PRENCLI, CATCLI, ADNCLI, ADRCLI, CPCLI, VILCLI, PAYSCLI, MAILCLI, TELCLI)
VALUES ('C011', 'Monsieur', 'PREMIER', 'JOS//EPH', 2, '77', 'RUE DE LA LIBERTE', '13001', 'MARSEILLE', 'FRANCE','josef@premier', '+33777889977');

1 ligne inséré.

SQL> INSERT INTO CLIENTS (CODCLI, CIVCLI, NOMCLI, PRENCLI, CATCLI, ADNCLI, ADRCLI, CPCLI, VILCLI, PAYSCLI, MAILCLI, TELCLI)
VALUES ('C012', 'Monsieur', 'CLEMENT', 'ADAM', 2, '13', 'AVENUE JEAN BAPTISTE CLEMENT', '9430', 'VILLETANEUSE', 'FRANCE','adam.clement@gmail.com', '+33149404072');

1 ligne inséré.

SQL> INSERT INTO CLIENTS (CODCLI, CIVCLI, NOMCLI, PRENCLI, CATCLI, ADNCLI, ADRCLI, CPCLI, VILCLI, PAYSCLI, MAILCLI, TELCLI)
VALUES ('C013', 'Monsieur', 'FORT', 'GABRIEL', 5, '1', 'AVENUE DE CARTAGE', '99000', 'TUNIS', 'TUNISIE','gabriel.fort@yahoo.fr', '+21624801777');

1 ligne inséré.

SQL> INSERT INTO CLIENTS (CODCLI, CIVCLI, NOMCLI, PRENCLI, CATCLI, ADNCLI, ADRCLI, CPCLI, VILCLI, PAYSCLI, MAILCLI, TELCLI)
VALUES ('C014', 'Monsieur', 'ADAM', 'DAVID', 5, '1', 'AVENUE DE ROME', '99001', 'ROME', 'ITALIE','david.adamé@gmail com', '');

1 ligne inséré.

SQL> INSERT INTO CLIENTS (CODCLI, CIVCLI, NOMCLI, PRENCLI, CATCLI, ADNCLI, ADRCLI, CPCLI, VILCLI, PAYSCLI, MAILCLI, TELCLI)
VALUES ('C015', 'Monsieur', 'Labsent', 'pala', 7, '1', 'rue des absents', '000', 'BAGDAD', 'IRAQ','pala-labsent@paici', '');

1 ligne inséré.

SQL> INSERT INTO CLIENTS (CODCLI, CIVCLI, NOMCLI, PRENCLI, CATCLI, ADNCLI, ADRCLI, CPCLI, VILCLI, PAYSCLI, MAILCLI, TELCLI)
VALUES ('C016', 'Monsieur', 'CLEMENCE', 'CLEMENT', 1, '5', 'RUE DE BELLEVILLE', '75019', 'PARIS', 'FRANCE','clement.clemence@yahoo.fr', '+33649404071');

1 ligne inséré.

SQL> INSERT INTO CLIENTS (CODCLI, CIVCLI, NOMCLI, PRENCLI, CATCLI, ADNCLI, ADRCLI, CPCLI, VILCLI, PAYSCLI, MAILCLI, TELCLI)
VALUES ('C017', 'Madame', 'CLEMENCE', 'CLEMENCE', 1, '5', 'RUE DE BELLEVILLE', '75019', 'PARIS', 'FRANCE','clemence.clemence@yahoo.fr', '+33649404071');

1 ligne inséré.

SQL> INSERT INTO CLIENTS (CODCLI, CIVCLI, NOMCLI, PRENCLI, CATCLI, ADNCLI, ADRCLI, CPCLI, VILCLI, PAYSCLI, MAILCLI, TELCLI)
VALUES ('C018', 'Madame', 'CLEMENCE', '', 1, '5', 'RUE DE BELLEVILLE', '75019', 'PARIS', 'FRANCE','clemence.clemence@yahoo.fr', '+33649404077');

Erreur commençant à la ligne: 561 de la commande -
INSERT INTO CLIENTS (CODCLI, CIVCLI, NOMCLI, PRENCLI, CATCLI, ADNCLI, ADRCLI, CPCLI, VILCLI, PAYSCLI, MAILCLI, TELCLI)
VALUES ('C018', 'Madame', 'CLEMENCE', '', 1, '5', 'RUE DE BELLEVILLE', '75019', 'PARIS', 'FRANCE','clemence.clemence@yahoo.fr', '+33649404077')
Rapport d'erreur -
Erreur SQL : ORA-02290: check constraint (MALEKUS.NN_CLIENTS_PRENCLI) violated
02290. 00000 -  "check constraint (%s.%s) violated"
*Cause:    The values being inserted do not satisfy the named check
           
*Action:   do not insert values that violate the constraint.
SQL> INSERT INTO CLIENTS (CODCLI, CIVCLI, NOMCLI, PRENCLI, CATCLI, ADNCLI, ADRCLI, CPCLI, VILCLI, PAYSCLI, MAILCLI, TELCLI)
VALUES ('C019', 'Monsieur', 'TRAIFOR', 'SAMI', 1, '16', 'AVENUE FOCH', '75016', 'PARIS', 'FRANCE','sami.traifor@gmail.com', '06070899');

1 ligne inséré.

SQL> INSERT INTO CLIENTS (CODCLI, CIVCLI, NOMCLI, PRENCLI, CATCLI, ADNCLI, ADRCLI, CPCLI, VILCLI, PAYSCLI, MAILCLI, TELCLI)
VALUES ('C055', 'Madame', 'obsolete', 'kadym', 7, '1', 'rue des anciens', '000', 'CARTHAGE', 'IFRIQIA','inexistant', 'inexistant');

1 ligne inséré.

SQL> INSERT INTO CLIENTS (CODCLI, CIVCLI, NOMCLI, PRENCLI, CATCLI, ADNCLI, ADRCLI, CPCLI, VILCLI, PAYSCLI, MAILCLI, TELCLI)
VALUES ('C056', 'Madame', 'RAHYM', 'KARYM', 1, '1', 'RUE DES GENTILS', '1000', 'CARTHAGE', 'TUNISIE','karym.rahym@gmail.com', '+21624808444');

1 ligne inséré.

SQL> PROMPT

SQL> --Pause Tapez sur Enter...
SQL> PROMPT

SQL> PROMPT =========================================================
=========================================================
SQL> PROMPT >> Insertion dans la Table : COMMANDES
>> Insertion dans la Table : COMMANDES
SQL> PROMPT =========================================================
=========================================================
SQL> PROMPT

SQL> INSERT INTO COMMANDES (NUMCOM, CODCLI, DATCOM)
VALUES ('20001AB', 'C012', 'SUNDAY 17-SEPTEMBER-2000');

1 ligne inséré.

SQL> INSERT INTO COMMANDES (NUMCOM, CODCLI, DATCOM)
VALUES ('20002AB', 'C001', 'SUNDAY 17-SEPTEMBER-2000');

1 ligne inséré.

SQL> INSERT INTO COMMANDES (NUMCOM, CODCLI, DATCOM)
VALUES ('20003AB', 'C006', ' MONDAY 16-OCTOBER-2000');

1 ligne inséré.

SQL> INSERT INTO COMMANDES (NUMCOM, CODCLI, DATCOM)
VALUES ('20004AB', 'C006', 'TUESDAY 24-OCTOBER-2000');

1 ligne inséré.

SQL> INSERT INTO COMMANDES (NUMCOM, CODCLI, DATCOM)
VALUES ('20011RB', 'C012', 'MONDAY 22-JANUARY-2001');

1 ligne inséré.

SQL> INSERT INTO COMMANDES (NUMCOM, CODCLI, DATCOM)
VALUES ('20012RB', 'C012', 'TUESDAY 13-MARCH-2001');

1 ligne inséré.

SQL> INSERT INTO COMMANDES (NUMCOM, CODCLI, DATCOM)
VALUES ('20031FB', 'C001', 'FRIDAY 14-FEBRURAY-2003');

Erreur commençant à la ligne: 599 de la commande -
INSERT INTO COMMANDES (NUMCOM, CODCLI, DATCOM)
VALUES ('20031FB', 'C001', 'FRIDAY 14-FEBRURAY-2003')
Rapport d'erreur -
Erreur SQL : ORA-01841: (full) year must be between -4713 and +9999, and not be 0
01841. 00000 -  "(full) year must be between -4713 and +9999, and not be 0"
*Cause:    Illegal year entered
*Action:   Input year in the specified range
SQL> INSERT INTO COMMANDES (NUMCOM, CODCLI, DATCOM)
VALUES ('20051FB', 'C003', 'FRIDAY 07-JANUARY-2005');

1 ligne inséré.

SQL> INSERT INTO COMMANDES (NUMCOM, CODCLI, DATCOM)
VALUES ('20052FB', 'C003', 'Wednesday 12-JANUARY-2005');

1 ligne inséré.

SQL> INSERT INTO COMMANDES (NUMCOM, CODCLI, DATCOM)
VALUES ('20053FB', 'C012', 'THURSDAY 10-MARCH-2005');

1 ligne inséré.

SQL> INSERT INTO COMMANDES (NUMCOM, CODCLI, DATCOM)
VALUES ('20054FB', 'C007', 'MONDAY 14-MARCH-2005');

1 ligne inséré.

SQL> INSERT INTO COMMANDES (NUMCOM, CODCLI, DATCOM)
VALUES ('20055FB', 'C012', 'FRIDAY 11-MARCH-2005');

1 ligne inséré.

SQL> INSERT INTO COMMANDES (NUMCOM, CODCLI, DATCOM)
VALUES ('20056FB', 'C013', 'MONDAY 14-MARCH-2005');

1 ligne inséré.

SQL> INSERT INTO COMMANDES (NUMCOM, CODCLI, DATCOM)
VALUES ('20057FB', 'C014', 'FRIDAY 11-MARCH-2005');

1 ligne inséré.

SQL> INSERT INTO COMMANDES (NUMCOM, CODCLI, DATCOM)
VALUES ('20061FB', 'C010', 'FRIDAY 14-FEBRURAY-2003');

Erreur commençant à la ligne: 623 de la commande -
INSERT INTO COMMANDES (NUMCOM, CODCLI, DATCOM)
VALUES ('20061FB', 'C010', 'FRIDAY 14-FEBRURAY-2003')
Rapport d'erreur -
Erreur SQL : ORA-01841: (full) year must be between -4713 and +9999, and not be 0
01841. 00000 -  "(full) year must be between -4713 and +9999, and not be 0"
*Cause:    Illegal year entered
*Action:   Input year in the specified range
SQL> INSERT INTO COMMANDES (NUMCOM, CODCLI, DATCOM)
VALUES ('20062FB', 'C009', 'FRIDAY 14-FEBRURAY-2003');

Erreur commençant à la ligne: 626 de la commande -
INSERT INTO COMMANDES (NUMCOM, CODCLI, DATCOM)
VALUES ('20062FB', 'C009', 'FRIDAY 14-FEBRURAY-2003')
Rapport d'erreur -
Erreur SQL : ORA-01841: (full) year must be between -4713 and +9999, and not be 0
01841. 00000 -  "(full) year must be between -4713 and +9999, and not be 0"
*Cause:    Illegal year entered
*Action:   Input year in the specified range
SQL> INSERT INTO COMMANDES (NUMCOM, CODCLI, DATCOM)
VALUES ('20065FB', 'C007', 'FRIDAY 14-FEBRURAY-2003');

Erreur commençant à la ligne: 629 de la commande -
INSERT INTO COMMANDES (NUMCOM, CODCLI, DATCOM)
VALUES ('20065FB', 'C007', 'FRIDAY 14-FEBRURAY-2003')
Rapport d'erreur -
Erreur SQL : ORA-01841: (full) year must be between -4713 and +9999, and not be 0
01841. 00000 -  "(full) year must be between -4713 and +9999, and not be 0"
*Cause:    Illegal year entered
*Action:   Input year in the specified range
SQL> INSERT INTO COMMANDES (NUMCOM, CODCLI, DATCOM)
VALUES ('20066FB', 'C002', 'FRIDAY 14-FEBRURAY-2003');

Erreur commençant à la ligne: 632 de la commande -
INSERT INTO COMMANDES (NUMCOM, CODCLI, DATCOM)
VALUES ('20066FB', 'C002', 'FRIDAY 14-FEBRURAY-2003')
Rapport d'erreur -
Erreur SQL : ORA-01841: (full) year must be between -4713 and +9999, and not be 0
01841. 00000 -  "(full) year must be between -4713 and +9999, and not be 0"
*Cause:    Illegal year entered
*Action:   Input year in the specified range
SQL> INSERT INTO COMMANDES (NUMCOM, CODCLI, DATCOM)
VALUES ('20067FB', 'C002', 'FRIDAY 14-FEBRURAY-2003');

Erreur commençant à la ligne: 635 de la commande -
INSERT INTO COMMANDES (NUMCOM, CODCLI, DATCOM)
VALUES ('20067FB', 'C002', 'FRIDAY 14-FEBRURAY-2003')
Rapport d'erreur -
Erreur SQL : ORA-01841: (full) year must be between -4713 and +9999, and not be 0
01841. 00000 -  "(full) year must be between -4713 and +9999, and not be 0"
*Cause:    Illegal year entered
*Action:   Input year in the specified range
SQL> INSERT INTO COMMANDES (NUMCOM, CODCLI, DATCOM)
VALUES ('20068FB', 'C002', 'FRIDAY 14-FEBRURAY-2003');

Erreur commençant à la ligne: 638 de la commande -
INSERT INTO COMMANDES (NUMCOM, CODCLI, DATCOM)
VALUES ('20068FB', 'C002', 'FRIDAY 14-FEBRURAY-2003')
Rapport d'erreur -
Erreur SQL : ORA-01841: (full) year must be between -4713 and +9999, and not be 0
01841. 00000 -  "(full) year must be between -4713 and +9999, and not be 0"
*Cause:    Illegal year entered
*Action:   Input year in the specified range
SQL> INSERT INTO COMMANDES (NUMCOM, CODCLI, DATCOM)
VALUES ('20069FB', 'C002', 'TUESDAY 30-JANUARY-2007');

1 ligne inséré.

SQL> INSERT INTO COMMANDES (NUMCOM, CODCLI, DATCOM)
VALUES ('20070FB', 'C002', 'TUESDAY 30-JANUARY-2007');

1 ligne inséré.

SQL> INSERT INTO COMMANDES (NUMCOM, CODCLI, DATCOM)
VALUES ('20071FB', 'C013', 'TUESDAY 30-JANUARY-2007');

1 ligne inséré.

SQL> INSERT INTO COMMANDES (NUMCOM, CODCLI, DATCOM)
VALUES ('20072FB', 'C013', 'TUESDAY 30-JANUARY-2007');

1 ligne inséré.

SQL> INSERT INTO COMMANDES (NUMCOM, CODCLI, DATCOM)
VALUES ('20073FB', 'C014', 'TUESDAY 30-JANUARY-2007');

1 ligne inséré.

SQL> INSERT INTO COMMANDES (NUMCOM, CODCLI, DATCOM)
VALUES ('20074FB', 'C014', 'TUESDAY 30-JANUARY-2007');

1 ligne inséré.

SQL> INSERT INTO COMMANDES (NUMCOM, CODCLI, DATCOM)
VALUES ('20184FB', 'C014', 'MONDAY 17-SEPTEMBER-2018');

1 ligne inséré.

SQL> INSERT INTO COMMANDES (NUMCOM, CODCLI, DATCOM)
VALUES ('20181AB', 'C012', 'MONDAY 17-SEPTEMBER-2018');

1 ligne inséré.

SQL> PROMPT

SQL> --Pause Tapez sur Enter...
SQL> PROMPT

SQL> PROMPT =========================================================
=========================================================
SQL> PROMPT >> Insertion dans la Table : ARTICLES
>> Insertion dans la Table : ARTICLES
SQL> PROMPT =========================================================
=========================================================
SQL> PROMPT

SQL> INSERT INTO ARTICLES (REFART, NOMART, PVART, QSART, PAART)
VALUES ('F1.001', 'SIEGE DE TABLE', 35.00, 10, 26.43);

1 ligne inséré.

SQL> INSERT INTO ARTICLES (REFART, NOMART, PVART, QSART, PAART)
VALUES ('F1.002', 'CASQUE CYCLISTE PROTECTION', 27.00, 20, 20.00);

1 ligne inséré.

SQL> INSERT INTO ARTICLES (REFART, NOMART, PVART, QSART, PAART)
VALUES ('F1.003', 'BONNET PARE-CHOCS', 10.71, 100, 5.71);

1 ligne inséré.

SQL> INSERT INTO ARTICLES (REFART, NOMART, PVART, QSART, PAART)
VALUES ('F1.004', 'STORE DE PROTECTION', 7.43, 5, 4.29);

1 ligne inséré.

SQL> INSERT INTO ARTICLES (REFART, NOMART, PVART, QSART, PAART)
VALUES ('F1.005', 'COINS DE PROTECTION', 4.00, 100, 1.71);

1 ligne inséré.

SQL> INSERT INTO ARTICLES (REFART, NOMART, PVART, QSART, PAART)
VALUES ('F1.006', 'CACHE PRISE DE COURANT', 2.29, 500, 0.71);

1 ligne inséré.

SQL> INSERT INTO ARTICLES (REFART, NOMART, PVART, QSART, PAART)
VALUES ('F1.007', 'BLOQUE PORTE', 5.00, 4, 2.29);

1 ligne inséré.

SQL> INSERT INTO ARTICLES (REFART, NOMART, PVART, QSART, PAART)
VALUES ('F1.008', 'BANDE DE FERMETURE', 3.29, 4, 1.71);

1 ligne inséré.

SQL> INSERT INTO ARTICLES (REFART, NOMART, PVART, QSART, PAART)
VALUES ('F1.009', 'PROTECTION DE FOUR', 37.86, 10, 26.43);

1 ligne inséré.

SQL> INSERT INTO ARTICLES (REFART, NOMART, PVART, QSART, PAART)
VALUES ('F1.010', 'PROTECTION DE CUISINIERE', 30.71, 10, 22.86);

1 ligne inséré.

SQL> INSERT INTO ARTICLES (REFART, NOMART, PVART, QSART, PAART)
VALUES ('F1.011', 'BABY PHONE', 80.71, 3, 45.71);

1 ligne inséré.

SQL> INSERT INTO ARTICLES (REFART, NOMART, PVART, QSART, PAART)
VALUES ('F1.012', 'BRETELLE DE SECURITE', 15.57, 8, 11.43);

1 ligne inséré.

SQL> INSERT INTO ARTICLES (REFART, NOMART, PVART, QSART, PAART)
VALUES ('F1.013', 'HAUSSE-CHAISE', 42.71, 1, 25.43);

1 ligne inséré.

SQL> INSERT INTO ARTICLES (REFART, NOMART, PVART, QSART, PAART)
VALUES ('F1.014', 'COUVRE ROBINETTERIE', 7.86, 12, 4.29);

1 ligne inséré.

SQL> INSERT INTO ARTICLES (REFART, NOMART, PVART, QSART, PAART)
VALUES ('F2.001', 'BARRIERE DE PORTE, EN BOIS', 32.71, 2, 25.71);

1 ligne inséré.

SQL> INSERT INTO ARTICLES (REFART, NOMART, PVART, QSART, PAART)
VALUES ('F2.002', 'BARRIERE DE PORTE, EN METAL', 49.14, 3, 28.43);

1 ligne inséré.

SQL> INSERT INTO ARTICLES (REFART, NOMART, PVART, QSART, PAART)
VALUES ('F2.003', 'BARRIERE DE LIT', 23.71, 10, 15.71);

1 ligne inséré.

SQL> INSERT INTO ARTICLES (REFART, NOMART, PVART, QSART, PAART)
VALUES ('F2.004', 'PORTE-BEBE', 44.86, 6, 34.29);

1 ligne inséré.

SQL> INSERT INTO ARTICLES (REFART, NOMART, PVART, QSART, PAART)
VALUES ('F2.005', 'SIEGE-AUTO COSMOS', 126.86, 2, 71.43);

1 ligne inséré.

SQL> INSERT INTO ARTICLES (REFART, NOMART, PVART, QSART, PAART)
VALUES ('F2.006', 'SIEGE-AUTO EUROSEAT', 121.29, 2, 71.43);

1 ligne inséré.

SQL> INSERT INTO ARTICLES (REFART, NOMART, PVART, QSART, PAART)
VALUES ('FB.001', 'DVD-SPIRIT', 24.90, 2, 12.00);

1 ligne inséré.

SQL> INSERT INTO ARTICLES (REFART, NOMART, PVART, QSART, PAART)
VALUES ('FB.002', 'DVD-SPIDER MAN', 24.90, 2, 12.00);

1 ligne inséré.

SQL> INSERT INTO ARTICLES (REFART, NOMART, PVART, QSART, PAART)
VALUES ('FB.003', 'DVD-SPIDER MAN 2', 24.90, 2, 12.00);

1 ligne inséré.

SQL> INSERT INTO ARTICLES (REFART, NOMART, PVART, QSART, PAART)
VALUES ('WD.001', 'K7 VIDEO-TOY STORY', 21.29, 10, 9.29);

1 ligne inséré.

SQL> INSERT INTO ARTICLES (REFART, NOMART, PVART, QSART, PAART)
VALUES ('WD.002', 'DVD-TOY STORY 2', 34.29, 10, 12.14);

1 ligne inséré.

SQL> INSERT INTO ARTICLES (REFART, NOMART, PVART, QSART, PAART)
VALUES ('WD.003', 'K7 VIDEO-WINNIE L OURSON', 22.86, 5, 9.29);

1 ligne inséré.

SQL> INSERT INTO ARTICLES (REFART, NOMART, PVART, QSART, PAART)
VALUES ('WD.004', 'DVD-FRERES DES OURS', 35.00, 3, 13.00);

1 ligne inséré.

SQL> INSERT INTO ARTICLES (REFART, NOMART, PVART, QSART, PAART)
VALUES ('WD.005', 'K7 VIDEO-LE ROI LION', 30.00, 1, 13.00);

1 ligne inséré.

SQL> INSERT INTO ARTICLES (REFART, NOMART, PVART, QSART, PAART)
VALUES ('WD.006', 'K7 VIDEO-LE ROI LION 2', 30.00, 4, 13.00);

1 ligne inséré.

SQL> INSERT INTO ARTICLES (REFART, NOMART, PVART, QSART, PAART)
VALUES ('WD.007', 'K7 VIDEO-LE ROI LION 3', 30.00, 3, 13.00);

1 ligne inséré.

SQL> PROMPT

SQL> --Pause Tapez sur Enter...
SQL> PROMPT

SQL> PROMPT =========================================================
=========================================================
SQL> PROMPT >> Insertion dans la Table : DETAILCOM
>> Insertion dans la Table : DETAILCOM
SQL> PROMPT =========================================================
=========================================================
SQL> PROMPT

SQL> INSERT INTO DETAILCOM (NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('20001AB', 'F1.001', 2, 35.00, 2.50);

1 ligne inséré.

SQL> INSERT INTO DETAILCOM (NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('20001AB', 'F1.003', 4, 10.71, 3.00);

1 ligne inséré.

SQL> INSERT INTO DETAILCOM (NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('20001AB', 'F1.013', 2, 49.14, 0.00);

1 ligne inséré.

SQL> INSERT INTO DETAILCOM (NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('20001AB', 'WD.001', 1, 21.29, 0.00);

1 ligne inséré.

SQL> INSERT INTO DETAILCOM (NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('20002AB', 'F1.001', 2, 33.00, 3.00);

1 ligne inséré.

SQL> INSERT INTO DETAILCOM (NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('20002AB', 'WD.001', 1, 21.29, 0.00);

1 ligne inséré.

SQL> INSERT INTO DETAILCOM (NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('20002AB', 'WD.002', 1, 34.29, 0.00);

1 ligne inséré.

SQL> INSERT INTO DETAILCOM (NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('20002AB', 'WD.003', 1, 22.86, 0.00);

1 ligne inséré.

SQL> INSERT INTO DETAILCOM (NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('20003AB', 'FB.001', 5, 21.00, 4.00);

1 ligne inséré.

SQL> INSERT INTO DETAILCOM(NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('20003AB', 'WD.002', 1, 34.29, 0.00);

1 ligne inséré.

SQL> INSERT INTO DETAILCOM (NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('20003AB', 'WD.003', 1, 22.86, 0.00);

1 ligne inséré.

SQL> INSERT INTO DETAILCOM (NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('20004AB', 'F1.008', 2, 3.29, 3.50);

1 ligne inséré.

SQL> INSERT INTO DETAILCOM (NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('20004AB', 'WD.001', 1, 21.29, 2.50);

1 ligne inséré.

SQL> INSERT INTO DETAILCOM (NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('20012RB', 'F1.007', 5, 5.00, 3.00);

1 ligne inséré.

SQL> INSERT INTO DETAILCOM (NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('20012RB', 'F1.009', 1, 37.86, 0.00);

1 ligne inséré.

SQL> INSERT INTO DETAILCOM (NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('20012RB', 'FB.003', 5, 24.00, 0.00);

1 ligne inséré.

SQL> INSERT INTO DETAILCOM (NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('20031FB', 'F1.008', 2, 3.29, 3.00);

Erreur commençant à la ligne: 820 de la commande -
INSERT INTO DETAILCOM (NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('20031FB', 'F1.008', 2, 3.29, 3.00)
Rapport d'erreur -
Erreur SQL : ORA-02291: integrity constraint (MALEKUS.FK_DETAILCOM_NUMCOM_COM) violated - parent key not found
02291. 00000 - "integrity constraint (%s.%s) violated - parent key not found"
*Cause:    A foreign key value has no matching primary key value.
*Action:   Delete the foreign key or add a matching primary key.
SQL> INSERT INTO DETAILCOM (NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('20031FB', 'F2.001', 1, 30.71, 0.00);

Erreur commençant à la ligne: 823 de la commande -
INSERT INTO DETAILCOM (NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('20031FB', 'F2.001', 1, 30.71, 0.00)
Rapport d'erreur -
Erreur SQL : ORA-02291: integrity constraint (MALEKUS.FK_DETAILCOM_NUMCOM_COM) violated - parent key not found
02291. 00000 - "integrity constraint (%s.%s) violated - parent key not found"
*Cause:    A foreign key value has no matching primary key value.
*Action:   Delete the foreign key or add a matching primary key.
SQL> INSERT INTO DETAILCOM (NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('20031FB', 'FB.001', 5, 21.00, 0.00);

Erreur commençant à la ligne: 826 de la commande -
INSERT INTO DETAILCOM (NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('20031FB', 'FB.001', 5, 21.00, 0.00)
Rapport d'erreur -
Erreur SQL : ORA-02291: integrity constraint (MALEKUS.FK_DETAILCOM_NUMCOM_COM) violated - parent key not found
02291. 00000 - "integrity constraint (%s.%s) violated - parent key not found"
*Cause:    A foreign key value has no matching primary key value.
*Action:   Delete the foreign key or add a matching primary key.
SQL> INSERT INTO DETAILCOM (NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('20051FB', 'F1.008', 2, 3.29, 0.00);

1 ligne inséré.

SQL> INSERT INTO DETAILCOM (NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('20051FB', 'FB.001', 5, 21.00, 4.00);

1 ligne inséré.

SQL> INSERT INTO DETAILCOM (NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('20052FB', 'F1.001', 2, 35.00, 0.00);

1 ligne inséré.

SQL> INSERT INTO DETAILCOM (NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('20052FB', 'F1.003', 4, 10.71, 0.00);

1 ligne inséré.

SQL> INSERT INTO DETAILCOM (NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('20052FB', 'F1.013', 2, 49.14, 3.50);

1 ligne inséré.

SQL> INSERT INTO DETAILCOM (NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('20052FB', 'WD.001', 1, 21.29, 0.00);

1 ligne inséré.

SQL> INSERT INTO DETAILCOM (NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('20052FB', 'WD.003', 1, 22.86, 0.00);

1 ligne inséré.

SQL> INSERT INTO DETAILCOM (NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('20053FB', 'WD.003', 1, 22.86, 0.00);

1 ligne inséré.

SQL> INSERT INTO DETAILCOM (NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('20054FB', 'WD.003', 1, 22.86, 0.00);

1 ligne inséré.

SQL> INSERT INTO DETAILCOM (NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('20055FB', 'F1.008', 5, 3.29, 0.00);

1 ligne inséré.

SQL> INSERT INTO DETAILCOM (NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('20055FB', 'F1.009', 1, 37.86, 0.00);

1 ligne inséré.

SQL> INSERT INTO DETAILCOM (NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('20055FB', 'F1.011', 2, 80.71, 0.00);

1 ligne inséré.

SQL> INSERT INTO DETAILCOM (NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('20055FB', 'F2.001', 1, 30.71, 0.00);

1 ligne inséré.

SQL> INSERT INTO DETAILCOM (NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('20056FB', 'F1.011', 2, 80.71, 0.00);

1 ligne inséré.

SQL> INSERT INTO DETAILCOM (NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('20057FB', 'F2.001', 1, 30.71, 0.00);

1 ligne inséré.

SQL> INSERT INTO DETAILCOM(NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('20061FB', 'FB.003', 5, 24.00, 0.00);

Erreur commençant à la ligne: 874 de la commande -
INSERT INTO DETAILCOM(NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('20061FB', 'FB.003', 5, 24.00, 0.00)
Rapport d'erreur -
Erreur SQL : ORA-02291: integrity constraint (MALEKUS.FK_DETAILCOM_NUMCOM_COM) violated - parent key not found
02291. 00000 - "integrity constraint (%s.%s) violated - parent key not found"
*Cause:    A foreign key value has no matching primary key value.
*Action:   Delete the foreign key or add a matching primary key.
SQL> INSERT INTO DETAILCOM(NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('20062FB', 'FB.003', 5, 24.00, 0.00);

Erreur commençant à la ligne: 877 de la commande -
INSERT INTO DETAILCOM(NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('20062FB', 'FB.003', 5, 24.00, 0.00)
Rapport d'erreur -
Erreur SQL : ORA-02291: integrity constraint (MALEKUS.FK_DETAILCOM_NUMCOM_COM) violated - parent key not found
02291. 00000 - "integrity constraint (%s.%s) violated - parent key not found"
*Cause:    A foreign key value has no matching primary key value.
*Action:   Delete the foreign key or add a matching primary key.
SQL> INSERT INTO DETAILCOM(NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('20065FB', 'FB.003', 5, 24.00, 0.00);

Erreur commençant à la ligne: 880 de la commande -
INSERT INTO DETAILCOM(NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('20065FB', 'FB.003', 5, 24.00, 0.00)
Rapport d'erreur -
Erreur SQL : ORA-02291: integrity constraint (MALEKUS.FK_DETAILCOM_NUMCOM_COM) violated - parent key not found
02291. 00000 - "integrity constraint (%s.%s) violated - parent key not found"
*Cause:    A foreign key value has no matching primary key value.
*Action:   Delete the foreign key or add a matching primary key.
SQL> INSERT INTO DETAILCOM(NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('20066FB', 'FB.003', 5, 24.00, 0.00);

Erreur commençant à la ligne: 883 de la commande -
INSERT INTO DETAILCOM(NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('20066FB', 'FB.003', 5, 24.00, 0.00)
Rapport d'erreur -
Erreur SQL : ORA-02291: integrity constraint (MALEKUS.FK_DETAILCOM_NUMCOM_COM) violated - parent key not found
02291. 00000 - "integrity constraint (%s.%s) violated - parent key not found"
*Cause:    A foreign key value has no matching primary key value.
*Action:   Delete the foreign key or add a matching primary key.
SQL> INSERT INTO DETAILCOM(NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('20067FB', 'FB.001', 22, 24.00, 0.00);

Erreur commençant à la ligne: 886 de la commande -
INSERT INTO DETAILCOM(NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('20067FB', 'FB.001', 22, 24.00, 0.00)
Rapport d'erreur -
Erreur SQL : ORA-02291: integrity constraint (MALEKUS.FK_DETAILCOM_NUMCOM_COM) violated - parent key not found
02291. 00000 - "integrity constraint (%s.%s) violated - parent key not found"
*Cause:    A foreign key value has no matching primary key value.
*Action:   Delete the foreign key or add a matching primary key.
SQL> INSERT INTO DETAILCOM(NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('20068FB', 'FB.001', 22, 24.00, 0.00);

Erreur commençant à la ligne: 889 de la commande -
INSERT INTO DETAILCOM(NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('20068FB', 'FB.001', 22, 24.00, 0.00)
Rapport d'erreur -
Erreur SQL : ORA-02291: integrity constraint (MALEKUS.FK_DETAILCOM_NUMCOM_COM) violated - parent key not found
02291. 00000 - "integrity constraint (%s.%s) violated - parent key not found"
*Cause:    A foreign key value has no matching primary key value.
*Action:   Delete the foreign key or add a matching primary key.
SQL> INSERT INTO DETAILCOM(NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('20069FB', 'FB.001', 25, 58.00, 0.00);

1 ligne inséré.

SQL> INSERT INTO DETAILCOM(NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('20070FB', 'FB.001', 50, 24.00, 0.00);

1 ligne inséré.

SQL> INSERT INTO DETAILCOM(NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('20071FB', 'FB.001', 37, 27.90, 0.00);

1 ligne inséré.

SQL> INSERT INTO DETAILCOM(NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('20072FB', 'FB.001', 8, 34.00, 0.00);

1 ligne inséré.

SQL> INSERT INTO DETAILCOM(NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('20073FB', 'FB.001', 35, 15.50, 0.00);

1 ligne inséré.

SQL> INSERT INTO DETAILCOM(NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('20074FB', 'FB.001', 12, 19.99, 0.00);

1 ligne inséré.

SQL> INSERT INTO DETAILCOM(NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('20181AB', 'FB.001', 7, 17.77, 0.00);

1 ligne inséré.

SQL> --=========================================================================
SQL> -- Nouvelles données pour les systèmes de recommandation
SQL> INSERT INTO COMMANDES (NUMCOM, CODCLI, DATCOM)
VALUES ('2018001', 'C001', 'MONDAY 17-SEPTEMBER-2018');

1 ligne inséré.

SQL> INSERT INTO DETAILCOM(NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('2018001', 'FB.001', 2, 17.77, 0.00);

1 ligne inséré.

SQL> INSERT INTO DETAILCOM(NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('2018001', 'FB.002', 3, 24.90, 0.00);

1 ligne inséré.

SQL> INSERT INTO DETAILCOM(NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('2018001', 'FB.003', 1, 24.90, 0.00);

1 ligne inséré.

SQL> INSERT INTO DETAILCOM(NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('2018001', 'FB.004', 1, 7.43, 0.00);

Erreur commençant à la ligne: 924 de la commande -
INSERT INTO DETAILCOM(NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('2018001', 'FB.004', 1, 7.43, 0.00)
Rapport d'erreur -
Erreur SQL : ORA-02291: integrity constraint (MALEKUS.FK_DETAILCOM_REFART_ARTICLES) violated - parent key not found
02291. 00000 - "integrity constraint (%s.%s) violated - parent key not found"
*Cause:    A foreign key value has no matching primary key value.
*Action:   Delete the foreign key or add a matching primary key.
SQL> INSERT INTO DETAILCOM(NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('2018001', 'FB.005', 1, 4.00, 0.00);

Erreur commençant à la ligne: 926 de la commande -
INSERT INTO DETAILCOM(NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('2018001', 'FB.005', 1, 4.00, 0.00)
Rapport d'erreur -
Erreur SQL : ORA-02291: integrity constraint (MALEKUS.FK_DETAILCOM_REFART_ARTICLES) violated - parent key not found
02291. 00000 - "integrity constraint (%s.%s) violated - parent key not found"
*Cause:    A foreign key value has no matching primary key value.
*Action:   Delete the foreign key or add a matching primary key.
SQL> INSERT INTO COMMANDES (NUMCOM, CODCLI, DATCOM)
VALUES ('2018002', 'C002', 'MONDAY 17-SEPTEMBER-2018');

1 ligne inséré.

SQL> INSERT INTO DETAILCOM(NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('2018002', 'FB.001', 1, 17.77, 0.00);

1 ligne inséré.

SQL> INSERT INTO DETAILCOM(NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('2018002', 'FB.002', 1, 24.90, 0.00);

1 ligne inséré.

SQL> INSERT INTO DETAILCOM(NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('2018002', 'FB.003', 1, 24.90, 0.00);

1 ligne inséré.

SQL> INSERT INTO DETAILCOM(NUMCOM, REFART, QTCOM, PUART, REMISE)

INSERT INTO COMMANDES (NUMCOM, CODCLI, DATCOM)
VALUES ('2018003', 'C003', 'MONDAY 17-SEPTEMBER-2018');

Erreur commençant à la ligne: 938 de la commande -
INSERT INTO DETAILCOM(NUMCOM, REFART, QTCOM, PUART, REMISE)

INSERT INTO COMMANDES (NUMCOM, CODCLI, DATCOM)
VALUES ('2018003', 'C003', 'MONDAY 17-SEPTEMBER-2018')
Erreur à la ligne de commande: 940 Colonne: 1
Rapport d'erreur -
Erreur SQL : ORA-00926: missing VALUES keyword
00926. 00000 -  "missing VALUES keyword"
*Cause:    
*Action:
SQL> INSERT INTO DETAILCOM(NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('2018003', 'FB.001', 5, 17.77, 0.00);

Erreur commençant à la ligne: 943 de la commande -
INSERT INTO DETAILCOM(NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('2018003', 'FB.001', 5, 17.77, 0.00)
Rapport d'erreur -
Erreur SQL : ORA-02291: integrity constraint (MALEKUS.FK_DETAILCOM_NUMCOM_COM) violated - parent key not found
02291. 00000 - "integrity constraint (%s.%s) violated - parent key not found"
*Cause:    A foreign key value has no matching primary key value.
*Action:   Delete the foreign key or add a matching primary key.
SQL> INSERT INTO DETAILCOM(NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('2018003', 'FB.002', 2, 24.90, 0.00);

Erreur commençant à la ligne: 945 de la commande -
INSERT INTO DETAILCOM(NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('2018003', 'FB.002', 2, 24.90, 0.00)
Rapport d'erreur -
Erreur SQL : ORA-02291: integrity constraint (MALEKUS.FK_DETAILCOM_NUMCOM_COM) violated - parent key not found
02291. 00000 - "integrity constraint (%s.%s) violated - parent key not found"
*Cause:    A foreign key value has no matching primary key value.
*Action:   Delete the foreign key or add a matching primary key.
SQL> INSERT INTO DETAILCOM(NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('2018003', 'FB.003', 1, 24.90, 0.00);

Erreur commençant à la ligne: 947 de la commande -
INSERT INTO DETAILCOM(NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('2018003', 'FB.003', 1, 24.90, 0.00)
Rapport d'erreur -
Erreur SQL : ORA-02291: integrity constraint (MALEKUS.FK_DETAILCOM_NUMCOM_COM) violated - parent key not found
02291. 00000 - "integrity constraint (%s.%s) violated - parent key not found"
*Cause:    A foreign key value has no matching primary key value.
*Action:   Delete the foreign key or add a matching primary key.
SQL> INSERT INTO DETAILCOM(NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('2018003', 'FB.005', 1, 4.00, 0.00);

Erreur commençant à la ligne: 949 de la commande -
INSERT INTO DETAILCOM(NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('2018003', 'FB.005', 1, 4.00, 0.00)
Rapport d'erreur -
Erreur SQL : ORA-02291: integrity constraint (MALEKUS.FK_DETAILCOM_REFART_ARTICLES) violated - parent key not found
02291. 00000 - "integrity constraint (%s.%s) violated - parent key not found"
*Cause:    A foreign key value has no matching primary key value.
*Action:   Delete the foreign key or add a matching primary key.
SQL> INSERT INTO COMMANDES (NUMCOM, CODCLI, DATCOM)
VALUES ('2018004', 'C004', 'MONDAY 17-SEPTEMBER-2018');

1 ligne inséré.

SQL> INSERT INTO DETAILCOM(NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('2018004', 'FB.002', 3, 24.90, 0.00);

1 ligne inséré.

SQL> INSERT INTO DETAILCOM(NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('2018004', 'FB.003', 3, 24.90, 0.00);

1 ligne inséré.

SQL> INSERT INTO DETAILCOM(NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('2018004', 'FB.004', 3, 7.43, 0.00);

Erreur commençant à la ligne: 959 de la commande -
INSERT INTO DETAILCOM(NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('2018004', 'FB.004', 3, 7.43, 0.00)
Rapport d'erreur -
Erreur SQL : ORA-02291: integrity constraint (MALEKUS.FK_DETAILCOM_REFART_ARTICLES) violated - parent key not found
02291. 00000 - "integrity constraint (%s.%s) violated - parent key not found"
*Cause:    A foreign key value has no matching primary key value.
*Action:   Delete the foreign key or add a matching primary key.
SQL> INSERT INTO DETAILCOM(NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('2018004', 'FB.005', 4, 4.00, 0.00);

Erreur commençant à la ligne: 961 de la commande -
INSERT INTO DETAILCOM(NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('2018004', 'FB.005', 4, 4.00, 0.00)
Rapport d'erreur -
Erreur SQL : ORA-02291: integrity constraint (MALEKUS.FK_DETAILCOM_REFART_ARTICLES) violated - parent key not found
02291. 00000 - "integrity constraint (%s.%s) violated - parent key not found"
*Cause:    A foreign key value has no matching primary key value.
*Action:   Delete the foreign key or add a matching primary key.
SQL> INSERT INTO COMMANDES (NUMCOM, CODCLI, DATCOM)
VALUES ('2018005', 'C006', 'FRIDAY 21-SEPTEMBER-2018');

1 ligne inséré.

SQL> INSERT INTO DETAILCOM(NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('2018005', 'FB.006', 1, 2.29, 0.00);

Erreur commençant à la ligne: 967 de la commande -
INSERT INTO DETAILCOM(NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('2018005', 'FB.006', 1, 2.29, 0.00)
Rapport d'erreur -
Erreur SQL : ORA-02291: integrity constraint (MALEKUS.FK_DETAILCOM_REFART_ARTICLES) violated - parent key not found
02291. 00000 - "integrity constraint (%s.%s) violated - parent key not found"
*Cause:    A foreign key value has no matching primary key value.
*Action:   Delete the foreign key or add a matching primary key.
SQL> INSERT INTO DETAILCOM(NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('2018005', 'FB.007', 1, 5.00, 0.00);

Erreur commençant à la ligne: 969 de la commande -
INSERT INTO DETAILCOM(NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('2018005', 'FB.007', 1, 5.00, 0.00)
Rapport d'erreur -
Erreur SQL : ORA-02291: integrity constraint (MALEKUS.FK_DETAILCOM_REFART_ARTICLES) violated - parent key not found
02291. 00000 - "integrity constraint (%s.%s) violated - parent key not found"
*Cause:    A foreign key value has no matching primary key value.
*Action:   Delete the foreign key or add a matching primary key.
SQL> INSERT INTO DETAILCOM(NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('2018005', 'FB.008', 1, 3.29, 0.00);

Erreur commençant à la ligne: 971 de la commande -
INSERT INTO DETAILCOM(NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('2018005', 'FB.008', 1, 3.29, 0.00)
Rapport d'erreur -
Erreur SQL : ORA-02291: integrity constraint (MALEKUS.FK_DETAILCOM_REFART_ARTICLES) violated - parent key not found
02291. 00000 - "integrity constraint (%s.%s) violated - parent key not found"
*Cause:    A foreign key value has no matching primary key value.
*Action:   Delete the foreign key or add a matching primary key.
SQL> INSERT INTO COMMANDES (NUMCOM, CODCLI, DATCOM)
VALUES ('2018006', 'C007', 'FRIDAY 21-SEPTEMBER-2018');

1 ligne inséré.

SQL> INSERT INTO DETAILCOM(NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('2018006', 'FB.006', 1, 2.29, 0.00);

Erreur commençant à la ligne: 977 de la commande -
INSERT INTO DETAILCOM(NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('2018006', 'FB.006', 1, 2.29, 0.00)
Rapport d'erreur -
Erreur SQL : ORA-02291: integrity constraint (MALEKUS.FK_DETAILCOM_REFART_ARTICLES) violated - parent key not found
02291. 00000 - "integrity constraint (%s.%s) violated - parent key not found"
*Cause:    A foreign key value has no matching primary key value.
*Action:   Delete the foreign key or add a matching primary key.
SQL> INSERT INTO DETAILCOM(NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('2018006', 'FB.007', 1, 5.00, 0.00);

Erreur commençant à la ligne: 979 de la commande -
INSERT INTO DETAILCOM(NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('2018006', 'FB.007', 1, 5.00, 0.00)
Rapport d'erreur -
Erreur SQL : ORA-02291: integrity constraint (MALEKUS.FK_DETAILCOM_REFART_ARTICLES) violated - parent key not found
02291. 00000 - "integrity constraint (%s.%s) violated - parent key not found"
*Cause:    A foreign key value has no matching primary key value.
*Action:   Delete the foreign key or add a matching primary key.
SQL> INSERT INTO COMMANDES (NUMCOM, CODCLI, DATCOM)
VALUES ('2018007', 'C009', 'FRIDAY 21-SEPTEMBER-2018');

1 ligne inséré.

SQL> INSERT INTO DETAILCOM(NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('2018007', 'FB.001', 5, 17.77, 0.00);

1 ligne inséré.

SQL> INSERT INTO DETAILCOM(NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('2018007', 'FB.009', 2, 37.86, 0.00);

Erreur commençant à la ligne: 987 de la commande -
INSERT INTO DETAILCOM(NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('2018007', 'FB.009', 2, 37.86, 0.00)
Rapport d'erreur -
Erreur SQL : ORA-02291: integrity constraint (MALEKUS.FK_DETAILCOM_REFART_ARTICLES) violated - parent key not found
02291. 00000 - "integrity constraint (%s.%s) violated - parent key not found"
*Cause:    A foreign key value has no matching primary key value.
*Action:   Delete the foreign key or add a matching primary key.
SQL> INSERT INTO DETAILCOM(NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('2018007', 'FB.010', 2, 30.71, 0.00);

Erreur commençant à la ligne: 989 de la commande -
INSERT INTO DETAILCOM(NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('2018007', 'FB.010', 2, 30.71, 0.00)
Rapport d'erreur -
Erreur SQL : ORA-02291: integrity constraint (MALEKUS.FK_DETAILCOM_REFART_ARTICLES) violated - parent key not found
02291. 00000 - "integrity constraint (%s.%s) violated - parent key not found"
*Cause:    A foreign key value has no matching primary key value.
*Action:   Delete the foreign key or add a matching primary key.
SQL> INSERT INTO COMMANDES (NUMCOM, CODCLI, DATCOM)
VALUES ('2018008', 'C010', 'FRIDAY 21-SEPTEMBER-2018');

1 ligne inséré.

SQL> INSERT INTO DETAILCOM(NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('2018008', 'FB.001', 1, 17.77, 0.00);

1 ligne inséré.

SQL> INSERT INTO DETAILCOM(NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('2018008', 'FB.009', 2, 37.86, 0.00);

Erreur commençant à la ligne: 997 de la commande -
INSERT INTO DETAILCOM(NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('2018008', 'FB.009', 2, 37.86, 0.00)
Rapport d'erreur -
Erreur SQL : ORA-02291: integrity constraint (MALEKUS.FK_DETAILCOM_REFART_ARTICLES) violated - parent key not found
02291. 00000 - "integrity constraint (%s.%s) violated - parent key not found"
*Cause:    A foreign key value has no matching primary key value.
*Action:   Delete the foreign key or add a matching primary key.
SQL> INSERT INTO COMMANDES (NUMCOM, CODCLI, DATCOM)
VALUES ('2018009', 'C011', 'FRIDAY 21-SEPTEMBER-2018');

1 ligne inséré.

SQL> INSERT INTO DETAILCOM(NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('2018009', 'FB.001', 2, 17.77, 0.00);

1 ligne inséré.

SQL> INSERT INTO DETAILCOM(NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('2018009', 'FB.009', 2, 37.86, 0.00);

Erreur commençant à la ligne: 1 005 de la commande -
INSERT INTO DETAILCOM(NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('2018009', 'FB.009', 2, 37.86, 0.00)
Rapport d'erreur -
Erreur SQL : ORA-02291: integrity constraint (MALEKUS.FK_DETAILCOM_REFART_ARTICLES) violated - parent key not found
02291. 00000 - "integrity constraint (%s.%s) violated - parent key not found"
*Cause:    A foreign key value has no matching primary key value.
*Action:   Delete the foreign key or add a matching primary key.
SQL> INSERT INTO DETAILCOM(NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('2018009', 'FB.010', 1, 30.71, 0.00);

Erreur commençant à la ligne: 1 007 de la commande -
INSERT INTO DETAILCOM(NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('2018009', 'FB.010', 1, 30.71, 0.00)
Rapport d'erreur -
Erreur SQL : ORA-02291: integrity constraint (MALEKUS.FK_DETAILCOM_REFART_ARTICLES) violated - parent key not found
02291. 00000 - "integrity constraint (%s.%s) violated - parent key not found"
*Cause:    A foreign key value has no matching primary key value.
*Action:   Delete the foreign key or add a matching primary key.
SQL> INSERT INTO COMMANDES (NUMCOM, CODCLI, DATCOM)
VALUES ('2018010', 'C013', 'MONDAY 17-SEPTEMBER-2018');

1 ligne inséré.

SQL> INSERT INTO DETAILCOM(NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('2018010', 'FB.001', 3, 17.77, 0.00);

1 ligne inséré.

SQL> INSERT INTO DETAILCOM(NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('2018010', 'FB.002', 1, 24.90, 0.00);

1 ligne inséré.

SQL> INSERT INTO DETAILCOM(NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('2018010', 'FB.006', 4, 2.29, 0.00);

Erreur commençant à la ligne: 1 017 de la commande -
INSERT INTO DETAILCOM(NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('2018010', 'FB.006', 4, 2.29, 0.00)
Rapport d'erreur -
Erreur SQL : ORA-02291: integrity constraint (MALEKUS.FK_DETAILCOM_REFART_ARTICLES) violated - parent key not found
02291. 00000 - "integrity constraint (%s.%s) violated - parent key not found"
*Cause:    A foreign key value has no matching primary key value.
*Action:   Delete the foreign key or add a matching primary key.
SQL> INSERT INTO COMMANDES (NUMCOM, CODCLI, DATCOM)
VALUES ('2018011', 'C014', 'MONDAY 17-SEPTEMBER-2018');

1 ligne inséré.

SQL> INSERT INTO DETAILCOM(NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('2018011', 'FB.001', 2, 17.77, 0.00);

1 ligne inséré.

SQL> INSERT INTO DETAILCOM(NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('2018011', 'FB.002', 1, 24.90, 0.00);

1 ligne inséré.

SQL> INSERT INTO DETAILCOM(NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('2018011', 'FB.006', 4, 2.29, 0.00);

Erreur commençant à la ligne: 1 027 de la commande -
INSERT INTO DETAILCOM(NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('2018011', 'FB.006', 4, 2.29, 0.00)
Rapport d'erreur -
Erreur SQL : ORA-02291: integrity constraint (MALEKUS.FK_DETAILCOM_REFART_ARTICLES) violated - parent key not found
02291. 00000 - "integrity constraint (%s.%s) violated - parent key not found"
*Cause:    A foreign key value has no matching primary key value.
*Action:   Delete the foreign key or add a matching primary key.
SQL> INSERT INTO DETAILCOM(NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('2018011', 'FB.007', 5, 5.00, 0.00);

Erreur commençant à la ligne: 1 029 de la commande -
INSERT INTO DETAILCOM(NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('2018011', 'FB.007', 5, 5.00, 0.00)
Rapport d'erreur -
Erreur SQL : ORA-02291: integrity constraint (MALEKUS.FK_DETAILCOM_REFART_ARTICLES) violated - parent key not found
02291. 00000 - "integrity constraint (%s.%s) violated - parent key not found"
*Cause:    A foreign key value has no matching primary key value.
*Action:   Delete the foreign key or add a matching primary key.
SQL> INSERT INTO COMMANDES (NUMCOM, CODCLI, DATCOM)
VALUES ('2018012', 'C016', 'FRIDAY 21-SEPTEMBER-2018');

1 ligne inséré.

SQL> INSERT INTO DETAILCOM(NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('2018012', 'FB.004', 3, 7.43, 0.00);

Erreur commençant à la ligne: 1 035 de la commande -
INSERT INTO DETAILCOM(NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('2018012', 'FB.004', 3, 7.43, 0.00)
Rapport d'erreur -
Erreur SQL : ORA-02291: integrity constraint (MALEKUS.FK_DETAILCOM_REFART_ARTICLES) violated - parent key not found
02291. 00000 - "integrity constraint (%s.%s) violated - parent key not found"
*Cause:    A foreign key value has no matching primary key value.
*Action:   Delete the foreign key or add a matching primary key.
SQL> INSERT INTO DETAILCOM(NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('2018012', 'FB.006', 1, 2.29, 0.00);

Erreur commençant à la ligne: 1 037 de la commande -
INSERT INTO DETAILCOM(NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('2018012', 'FB.006', 1, 2.29, 0.00)
Rapport d'erreur -
Erreur SQL : ORA-02291: integrity constraint (MALEKUS.FK_DETAILCOM_REFART_ARTICLES) violated - parent key not found
02291. 00000 - "integrity constraint (%s.%s) violated - parent key not found"
*Cause:    A foreign key value has no matching primary key value.
*Action:   Delete the foreign key or add a matching primary key.
SQL> INSERT INTO DETAILCOM(NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('2018012', 'FB.009', 1, 37.86, 0.00);

Erreur commençant à la ligne: 1 039 de la commande -
INSERT INTO DETAILCOM(NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('2018012', 'FB.009', 1, 37.86, 0.00)
Rapport d'erreur -
Erreur SQL : ORA-02291: integrity constraint (MALEKUS.FK_DETAILCOM_REFART_ARTICLES) violated - parent key not found
02291. 00000 - "integrity constraint (%s.%s) violated - parent key not found"
*Cause:    A foreign key value has no matching primary key value.
*Action:   Delete the foreign key or add a matching primary key.
SQL> INSERT INTO COMMANDES (NUMCOM, CODCLI, DATCOM)
VALUES ('2018013', 'C017', 'FRIDAY 21-SEPTEMBER-2018');

1 ligne inséré.

SQL> INSERT INTO DETAILCOM(NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('2018013', 'FB.004', 1, 7.43, 0.00);

Erreur commençant à la ligne: 1 045 de la commande -
INSERT INTO DETAILCOM(NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('2018013', 'FB.004', 1, 7.43, 0.00)
Rapport d'erreur -
Erreur SQL : ORA-02291: integrity constraint (MALEKUS.FK_DETAILCOM_REFART_ARTICLES) violated - parent key not found
02291. 00000 - "integrity constraint (%s.%s) violated - parent key not found"
*Cause:    A foreign key value has no matching primary key value.
*Action:   Delete the foreign key or add a matching primary key.
SQL> INSERT INTO DETAILCOM(NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('2018013', 'FB.009', 1, 37.86, 0.00);

Erreur commençant à la ligne: 1 047 de la commande -
INSERT INTO DETAILCOM(NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('2018013', 'FB.009', 1, 37.86, 0.00)
Rapport d'erreur -
Erreur SQL : ORA-02291: integrity constraint (MALEKUS.FK_DETAILCOM_REFART_ARTICLES) violated - parent key not found
02291. 00000 - "integrity constraint (%s.%s) violated - parent key not found"
*Cause:    A foreign key value has no matching primary key value.
*Action:   Delete the foreign key or add a matching primary key.
SQL> INSERT INTO COMMANDES (NUMCOM, CODCLI, DATCOM)
VALUES ('2018014', 'C019', 'FRIDAY 21-SEPTEMBER-2018');

1 ligne inséré.

SQL> INSERT INTO DETAILCOM(NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('2018014', 'FB.011', 1, 80.71, 0.00);

Erreur commençant à la ligne: 1 053 de la commande -
INSERT INTO DETAILCOM(NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('2018014', 'FB.011', 1, 80.71, 0.00)
Rapport d'erreur -
Erreur SQL : ORA-02291: integrity constraint (MALEKUS.FK_DETAILCOM_REFART_ARTICLES) violated - parent key not found
02291. 00000 - "integrity constraint (%s.%s) violated - parent key not found"
*Cause:    A foreign key value has no matching primary key value.
*Action:   Delete the foreign key or add a matching primary key.
SQL> INSERT INTO COMMANDES (NUMCOM, CODCLI, DATCOM)
VALUES ('2018015', 'C001', 'MONDAY 24-SEPTEMBER-2018');

1 ligne inséré.

SQL> INSERT INTO DETAILCOM(NUMCOM, REFART, QTCOM, PUART, REMISE)
VALUES ('2018015', 'FB.001', 6, 17.77, 0.00);

1 ligne inséré.

SQL> --=========================================================================
SQL> PROMPT =========================================================
=========================================================
SQL> PROMPT Validation des insertions dans la bd EN SQL 2 
Validation des insertions dans la bd EN SQL 2
SQL> PROMPT =========================================================
=========================================================
SQL> COMMIT;
Validation (commit) terminée.
SQL> PROMPT

SQL> --Pause Tapez sur Enter...
SQL> -- Affichage des données ===================================================
SQL> -- en SQL 2 ================================================================
SQL> -- Affichage des lignes dans les tables ====================================
SQL> PROMPT

SQL> PROMPT =========================================================
=========================================================
SQL> PROMPT Affichage des tables de la bd EN SQL 2 
Affichage des tables de la bd EN SQL 2
SQL> PROMPT =========================================================
=========================================================
SQL> SET TIMING ON
SQL> SET LINES 1000
SQL> SET PAGES 1000
SQL> COLUMN CODCLI  FORMAT A6
SQL> COLUMN CIVCLI  FORMAT A8
SQL> COLUMN NOMCLI  FORMAT A8
SQL> COLUMN PRENCLI FORMAT A8
SQL> COLUMN CATCLI  FORMAT 99
SQL> COLUMN ADNCLI  FORMAT A6
SQL> COLUMN ADRCLI  FORMAT A10
SQL> COLUMN CPCLI   FORMAT A5
SQL> COLUMN VILCLI  FORMAT A6
SQL> COLUMN PAYSCLI FORMAT A7
SQL> COLUMN MAILCLI FORMAT A10
SQL> COLUMN TELCLI  FORMAT A10
SQL> COLUMN NUMCOM  FORMAT A10
SQL> COLUMN DATCOM  FORMAT A28
SQL> COLUMN REFART  FORMAT A8
SQL> COLUMN NOMART  FORMAT A25
SQL> COLUMN PVART   FORMAT 999.99
SQL> COLUMN QSART   FORMAT 99
SQL> COLUMN PAART   FORMAT 999.99
SQL> COLUMN QTCOM   FORMAT 99
SQL> COLUMN PUART   FORMAT 999.99
SQL> COLUMN REMISE  FORMAT 999.99
SQL> SELECT * FROM CLIENTS;

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          Requete:lesarticlesquisonttoujourscommandésensemble                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           
=========================================================================                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        
CODCLI CIVCLI   NOMCLI   PRENCLI  CATCLI ADNCLI ADRCLI     CPCLI VILCLI PAYSCLI MAILCLI    TELCLI   
------ -------- -------- -------- ------ ------ ---------- ----- ------ ------- ---------- ----------
C001   Madame   CLEM@ENT EVE           1 18     BOULEVARD  91000 EPINAY FRANCE  eve.clemen +337778899
                                                FOCH             -SUR-O         t@gmail.co 11        
                                                                 RGE            m                    

C002   Madame   LESEUL   MARIE         1 21     AVENUE D I 75013 PARIS  FRANCE  marieleseu 0617586565
                                                TALIE                           l@yahoo.fr           

C003   Madame   UNIQUE   MARINE        2 77     RUE DE LA  13001 MARCHE FRANCE  munique@gm +337778899
                                                LIBERTE          ILLE           ail.com    22        

C004   Madame   CLEMENCE EVELYNE       3 8 BIS  BOULEVARD  93800 EPINAY FRANCE  clemence e +337778899
                                                FOCH             -SUR-S         velyne@gma 33        
                                                                 EINE           il.com               

C005   Madame   FORT     JEANNE        3 55     RUE DU JAP 94310 ORLY-V FRANCE  jfort\@hot +337778899
                                                ON               ILLE           mail.fr    44        

C006   Mademois LE BON   CLEMENCE      1 18     BOULEVARD  93800 EPINAY FRANCE  clemence.l 0033777889
       elle                                     FOCH             -SUR-S         e bon@cfo. 955       
                                                                 EINE           fr                   

C007   Mademois TRAIFOR  ALICE         2 6      RUE DE LA  75015 PARIS  FRANCE  alice.trai +337778899
       elle                                     ROSIERE                         for@yahoo. 66        
                                                                                fr                   

C008   Monsieur VIVANT   JEAN-BAP      1 13     RUE DE LA  93800 EPINAY FRANCE  jeanbaptis 0607      
                         TISTE                  PAIX             -SUR-S         te@                  
                                                                 EINE                                

C009   Monsieur CLEMENCE ALEXANDR      1 5      RUE DE BEL 75019 PARIS  FRANCE  alexandre. +331494040
                         E                      LEVILLE                         clemence@u 71        
                                                                                p13.fr               

C010   Monsieur TRAIFOR  ALEXANDR      1 16     AVENUE FOC 75016 PARIS  FRA     alexandre. 06070809  
                         E                      H                               traifor@up           
                                                                                13.fr                

C011   Monsieur PREMIER  JOS//EPH      2 77     RUE DE LA  13001 MARSEI FRANCE  josef@prem +337778899
                                                LIBERTE          LLE            ier        77        

C012   Monsieur CLEMENT  ADAM          2 13     AVENUE JEA 9430  VILLET FRANCE  adam.cleme +331494040
                                                N BAPTISTE       ANEUSE         nt@gmail.c 72        
                                                 CLEMENT                        om                   

C013   Monsieur FORT     GABRIEL       5 1      AVENUE DE  99000 TUNIS  TUNISIE gabriel.fo +216248017
                                                CARTAGE                         rt@yahoo.f 77        
                                                                                r                    

C014   Monsieur ADAM     DAVID         5 1      AVENUE DE  99001 ROME   ITALIE  david.adam           
                                                ROME                            é@gmail co           
                                                                                m                    

C015   Monsieur Labsent  pala          7 1      rue des ab 000   BAGDAD IRAQ    pala-labse           
                                                sents                           nt@paici             

C016   Monsieur CLEMENCE CLEMENT       1 5      RUE DE BEL 75019 PARIS  FRANCE  clement.cl +336494040
                                                LEVILLE                         emence@yah 71        
                                                                                oo.fr                

C017   Madame   CLEMENCE CLEMENCE      1 5      RUE DE BEL 75019 PARIS  FRANCE  clemence.c +336494040
                                                LEVILLE                         lemence@ya 71        
                                                                                hoo.fr               

C019   Monsieur TRAIFOR  SAMI          1 16     AVENUE FOC 75016 PARIS  FRANCE  sami.traif 06070899  
                                                H                               or@gmail.c           
                                                                                om                   

C055   Madame   obsolete kadym         7 1      rue des an 000   CARTHA IFRIQIA inexistant inexistant
                                                ciens            GE                                  

C056   Madame   RAHYM    KARYM         1 1      RUE DES GE 1000  CARTHA TUNISIE karym.rahy +216248084
                                                NTILS            GE             m@gmail.co 44        
                                                                                m                    


 20 lignes sélectionnées 

Elapsed: 00:00:00.015
SQL> PROMPT

SQL> --Pause Tapez sur Enter...
SQL> PROMPT

SQL> SELECT * FROM COMMANDES;

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          Requete:lesarticlesquisonttoujourscommandésensemble                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           
=========================================================================                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        
NUMCOM     CODCLI DATCOM                     
---------- ------ ----------------------------
20001AB    C012   DIMANCHE 17-SEPTEMBRE-2000  
20002AB    C001   DIMANCHE 17-SEPTEMBRE-2000  
20003AB    C006   LUNDI    16-OCTOBRE  -2000  
20004AB    C006   MARDI    24-OCTOBRE  -2000  
20011RB    C012   LUNDI    22-JANVIER  -2001  
20012RB    C012   MARDI    13-MARS     -2001  
20051FB    C003   VENDREDI 07-JANVIER  -2005  
20052FB    C003   MERCREDI 12-JANVIER  -2005  
20053FB    C012   JEUDI    10-MARS     -2005  
20054FB    C007   LUNDI    14-MARS     -2005  
20055FB    C012   VENDREDI 11-MARS     -2005  
20056FB    C013   LUNDI    14-MARS     -2005  
20057FB    C014   VENDREDI 11-MARS     -2005  
20069FB    C002   MARDI    30-JANVIER  -2007  
20070FB    C002   MARDI    30-JANVIER  -2007  
20071FB    C013   MARDI    30-JANVIER  -2007  
20072FB    C013   MARDI    30-JANVIER  -2007  
20073FB    C014   MARDI    30-JANVIER  -2007  
20074FB    C014   MARDI    30-JANVIER  -2007  
20184FB    C014   LUNDI    17-SEPTEMBRE-2018  
20181AB    C012   LUNDI    17-SEPTEMBRE-2018  
2018001    C001   LUNDI    17-SEPTEMBRE-2018  
2018002    C002   LUNDI    17-SEPTEMBRE-2018  
2018004    C004   LUNDI    17-SEPTEMBRE-2018  
2018005    C006   VENDREDI 21-SEPTEMBRE-2018  
2018006    C007   VENDREDI 21-SEPTEMBRE-2018  
2018007    C009   VENDREDI 21-SEPTEMBRE-2018  
2018008    C010   VENDREDI 21-SEPTEMBRE-2018  
2018009    C011   VENDREDI 21-SEPTEMBRE-2018  
2018010    C013   LUNDI    17-SEPTEMBRE-2018  
2018011    C014   LUNDI    17-SEPTEMBRE-2018  
2018012    C016   VENDREDI 21-SEPTEMBRE-2018  
2018013    C017   VENDREDI 21-SEPTEMBRE-2018  
2018014    C019   VENDREDI 21-SEPTEMBRE-2018  
2018015    C001   LUNDI    24-SEPTEMBRE-2018  

 35 lignes sélectionnées 

Elapsed: 00:00:00.012
SQL> PROMPT

SQL> --Pause Tapez sur Enter...
SQL> PROMPT

SQL> SELECT * FROM ARTICLES;

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          Requete:lesarticlesquisonttoujourscommandésensemble                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           
=========================================================================                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        
REFART   NOMART                      PVART QSART   PAART
-------- ------------------------- ------- ----- -------
F1.001   SIEGE DE TABLE              35.00    10   26.43
F1.002   CASQUE CYCLISTE PROTECTIO   27.00    20   20.00
         N                                              

F1.003   BONNET PARE-CHOCS           10.71   ###    5.71
F1.004   STORE DE PROTECTION          7.43     5    4.29
F1.005   COINS DE PROTECTION          4.00   ###    1.71
F1.006   CACHE PRISE DE COURANT       2.29   ###     .71
F1.007   BLOQUE PORTE                 5.00     4    2.29
F1.008   BANDE DE FERMETURE           3.29     4    1.71
F1.009   PROTECTION DE FOUR          37.86    10   26.43
F1.010   PROTECTION DE CUISINIERE    30.71    10   22.86
F1.011   BABY PHONE                  80.71     3   45.71
F1.012   BRETELLE DE SECURITE        15.57     8   11.43
F1.013   HAUSSE-CHAISE               42.71     1   25.43
F1.014   COUVRE ROBINETTERIE          7.86    12    4.29
F2.001   BARRIERE DE PORTE, EN BOI   32.71     2   25.71
         S                                              

F2.002   BARRIERE DE PORTE, EN MET   49.14     3   28.43
         AL                                             

F2.003   BARRIERE DE LIT             23.71    10   15.71
F2.004   PORTE-BEBE                  44.86     6   34.29
F2.005   SIEGE-AUTO COSMOS          126.86     2   71.43
F2.006   SIEGE-AUTO EUROSEAT        121.29     2   71.43
FB.001   DVD-SPIRIT                  24.90     2   12.00
FB.002   DVD-SPIDER MAN              24.90     2   12.00
FB.003   DVD-SPIDER MAN 2            24.90     2   12.00
WD.001   K7 VIDEO-TOY STORY          21.29    10    9.29
WD.002   DVD-TOY STORY 2             34.29    10   12.14
WD.003   K7 VIDEO-WINNIE L OURSON    22.86     5    9.29
WD.004   DVD-FRERES DES OURS         35.00     3   13.00
WD.005   K7 VIDEO-LE ROI LION        30.00     1   13.00
WD.006   K7 VIDEO-LE ROI LION 2      30.00     4   13.00
WD.007   K7 VIDEO-LE ROI LION 3      30.00     3   13.00

 30 lignes sélectionnées 

Elapsed: 00:00:00.013
SQL> PROMPT

SQL> --Pause Tapez sur Enter...
SQL> PROMPT

SQL> SELECT * FROM DETAILCOM;

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          Requete:lesarticlesquisonttoujourscommandésensemble                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           
=========================================================================                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        
NUMCOM     REFART   QTCOM   PUART  REMISE
---------- -------- ----- ------- -------
20001AB    F1.001       2   35.00    2.50
20001AB    F1.003       4   10.71    3.00
20001AB    F1.013       2   49.14     .00
20001AB    WD.001       1   21.29     .00
20002AB    F1.001       2   33.00    3.00
20002AB    WD.001       1   21.29     .00
20002AB    WD.002       1   34.29     .00
20002AB    WD.003       1   22.86     .00
20003AB    FB.001       5   21.00    4.00
20003AB    WD.002       1   34.29     .00
20003AB    WD.003       1   22.86     .00
20004AB    F1.008       2    3.29    3.50
20004AB    WD.001       1   21.29    2.50
20012RB    F1.007       5    5.00    3.00
20012RB    F1.009       1   37.86     .00
20012RB    FB.003       5   24.00     .00
20051FB    F1.008       2    3.29     .00
20051FB    FB.001       5   21.00    4.00
20052FB    F1.001       2   35.00     .00
20052FB    F1.003       4   10.71     .00
20052FB    F1.013       2   49.14    3.50
20052FB    WD.001       1   21.29     .00
20052FB    WD.003       1   22.86     .00
20053FB    WD.003       1   22.86     .00
20054FB    WD.003       1   22.86     .00
20055FB    F1.008       5    3.29     .00
20055FB    F1.009       1   37.86     .00
20055FB    F1.011       2   80.71     .00
20055FB    F2.001       1   30.71     .00
20056FB    F1.011       2   80.71     .00
20057FB    F2.001       1   30.71     .00
20069FB    FB.001      25   58.00     .00
20070FB    FB.001      50   24.00     .00
20071FB    FB.001      37   27.90     .00
20072FB    FB.001       8   34.00     .00
20073FB    FB.001      35   15.50     .00
20074FB    FB.001      12   19.99     .00
20181AB    FB.001       7   17.77     .00
2018001    FB.001       2   17.77     .00
2018001    FB.002       3   24.90     .00
2018001    FB.003       1   24.90     .00
2018002    FB.001       1   17.77     .00
2018002    FB.002       1   24.90     .00
2018002    FB.003       1   24.90     .00
2018004    FB.002       3   24.90     .00
2018004    FB.003       3   24.90     .00
2018007    FB.001       5   17.77     .00
2018008    FB.001       1   17.77     .00
2018009    FB.001       2   17.77     .00
2018010    FB.001       3   17.77     .00
2018010    FB.002       1   24.90     .00
2018011    FB.001       2   17.77     .00
2018011    FB.002       1   24.90     .00
2018015    FB.001       6   17.77     .00

 54 lignes sélectionnées 

Elapsed: 00:00:00.014
SQL> PROMPT

SQL> --Pause Tapez sur Enter...
SQL> PROMPT

SQL> -- ===============================================================================
SQL> -- Insertion des données ============================ FIN ========================
SQL> -- en SQL 2 ======================================================================
SQL> -- Manipulations-Interrogations des données =======================================================
SQL> -- en SQL 2 =======================================================================================
SQL> -- Requêtes dans les tables =======================================================================
SQL> -- ************************************************************************************************ 
SQL> -- ************************************************************************************************ 
SQL> -- ************************************************************************************************ 
SQL> -- ************************************************************************************************ 
SQL> -- ************************************************************************************************ 
SQL> -- **********    Historique des mouvements des articles                             *************** 
SQL> -- **********    CORRELATION ENTTRE LES PRIX DES ARTICLE ET LE CHIFFRE D'AFFAIRES   *************** 
SQL> -- **********    CORRELATION ENTTRE LES PRIX DES ARTICLE ET LE CHIFFRE D'AFFAIRES   *************** 
SQL> -- ************************************************************************************************ 
SQL> -- ************************************************************************************************ 
SQL> -- ************************************************************************************************ 
SQL> -- ************************************************************************************************ 
SQL> -- ************************************************************************************************ 
SQL> -- Manipulations pour vérifier les TRIGGERS des lignes dans les tables ===========
SQL> -- Table des Articles
SQL> PROMPT

SQL> --Pause Tapez sur Enter...
SQL> PROMPT

SQL> PROMPT =========================================================
=========================================================
SQL> PROMPT Exemple avec 2 insertions et 2 mises à jour dans la table ARTICLES
Exemple avec 2 insertions et 2 mises à jour dans la table ARTICLES
SQL> PROMPT =========================================================
=========================================================
SQL> PROMPT

SQL> DELETE	FROM	ARTICLES
WHERE	REFART = 'WD.010';

0 lignes supprimé.

Elapsed: 00:00:00.002
SQL> INSERT INTO ARTICLES (REFART, NOMART, PVART, QSART, PAART)
VALUES ('WD.010', 'K7 VIDEO-Exemple de k7', 30.00, 3, 13.00);

1 ligne inséré.

Elapsed: 00:00:00.002
SQL> DELETE	FROM	ARTICLES
WHERE	REFART = 'WD.011';

0 lignes supprimé.

Elapsed: 00:00:00.002
SQL> INSERT INTO ARTICLES (REFART, NOMART, PVART, QSART, PAART)
VALUES ('WD.011', 'Exemple de DVD', 25.00, 5, 10.00);

1 ligne inséré.

Elapsed: 00:00:00.002
SQL> PROMPT

SQL> --Pause Tapez sur Enter...
SQL> PROMPT

SQL> COLUMN REFART	FORMAT A6
SQL> COLUMN NOMART	FORMAT A25
SQL> COLUMN PVART	FORMAT 99.99
SQL> COLUMN QSMART	FORMAT 99
SQL> COLUMN PAART	FORMAT 99.99
SQL> COLUMN DATMAJ	FORMAT A26
SQL> PROMPT =========================================================
=========================================================
SQL> PROMPT Visualisation des articles insérés dans ARTICLES
Visualisation des articles insérés dans ARTICLES
SQL> PROMPT =========================================================
=========================================================
SQL> TTITLE CENTER 'Visualisation des articles insérés dans ARTICLES' skip 1 -
       LEFT   '=========================================================================' skip 0
SQL> SELECT	*
FROM	ARTICLES
WHERE	REFART IN ('WD.010', 'WD.011');

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              VisualisationdesarticlesinsérésdansARTICLES                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               
=========================================================================                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        
REFART NOMART                     PVART QSART  PAART
------ ------------------------- ------ ----- ------
WD.010 K7 VIDEO-Exemple de k7     30.00     3  13.00
WD.011 Exemple de DVD             25.00     5  10.00

Elapsed: 00:00:00.015
SQL> -- >>>>>>>>>>>>>>>>>>>>>>>>>> -- Résultat généré:
SQL> -- ??? 
SQL> PROMPT

SQL> --Pause Tapez sur Enter...
SQL> PROMPT

SQL> PROMPT =========================================================
=========================================================
SQL> PROMPT MAJ des articles dans ARTICLES
MAJ des articles dans ARTICLES
SQL> PROMPT =========================================================
=========================================================
SQL> PROMPT

SQL> TTITLE CENTER 'Mise à jour des articles insérés dans ARTICLES' skip 1 -
       LEFT   '=========================================================================' skip 0
SQL> UPDATE	ARTICLES
SET	PVART = 45.00, PAART = 15.00
WHERE	REFART = 'WD.010';

1 ligne mis à jour.

Elapsed: 00:00:00.003
SQL> UPDATE	ARTICLES
SET	PVART = 2.00
WHERE	REFART = 'WD.011';

1 ligne mis à jour.

Elapsed: 00:00:00.003
SQL> PROMPT

SQL> --Pause Tapez sur Enter...
SQL> PROMPT

SQL> PROMPT =====================================================================
=====================================================================
SQL> PROMPT Visualisation des 2 articles MAJ dans ARTICLES
Visualisation des 2 articles MAJ dans ARTICLES
SQL> PROMPT =====================================================================
=====================================================================
SQL> PROMPT

SQL> TTITLE CENTER 'Visualisation des 2 articles MAJ dans ARTICLES' skip 1 -
       LEFT   '=========================================================================' skip 0
SQL> SELECT	*
FROM	ARTICLES
WHERE	REFART IN ('WD.010', 'WD.011');

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             Visualisation des 2 articles MAJ dans ARTICLES                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             
=========================================================================                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        
REFART NOMART                     PVART QSART  PAART
------ ------------------------- ------ ----- ------
WD.010 K7 VIDEO-Exemple de k7     45.00     3  15.00
WD.011 Exemple de DVD              2.00     5  10.00

Elapsed: 00:00:00.007
SQL> -- >>>>>>>>>>>>>>>>>>>>>>>>>> -- Résultat généré:
SQL> -- ??? 
SQL> PROMPT

SQL> --Pause Tapez sur Enter...
SQL> PROMPT

SQL> PROMPT =====================================================================
=====================================================================
SQL> PROMPT Visualisation de la table HISTORIQUE_PRIX
Visualisation de la table HISTORIQUE_PRIX
SQL> PROMPT =====================================================================
=====================================================================
SQL> PROMPT

SQL> TTITLE CENTER 'Visualisation de la table HISTORIQUE_PRIX' skip 1 -
       LEFT   '=========================================================================' skip 0
SQL> SELECT	*
FROM	HISTORIQUE_PRIX;

Erreur commençant à la ligne: 1 250 de la commande -
SELECT	*
FROM	HISTORIQUE_PRIX
Erreur à la ligne de commande: 1 251 Colonne: 6
Rapport d'erreur -
Erreur SQL : ORA-00942: table or view does not exist
00942. 00000 -  "table or view does not exist"
*Cause:    
*Action:
Elapsed: 00:00:00.008
SQL> -- >>>>>>>>>>>>>>>>>>>>>>>>>> -- Résultat généré:
SQL> -- ??? 
SQL> PROMPT

SQL> --Pause Tapez sur Enter...
SQL> PROMPT

SQL> PROMPT 

SQL> PROMPT =====================================================================
=====================================================================
SQL> PROMPT |                                                                   |
|                                                                   |
SQL> PROMPT |      Historique des mouvements des articles                       |
|      Historique des mouvements des articles                       |
SQL> PROMPT |                                                                   |
|                                                                   |
SQL> PROMPT =====================================================================
=====================================================================
SQL> PROMPT

SQL> PROMPT

SQL> PROMPT

SQL> --Pause Tapez sur Enter...
SQL> PROMPT

SQL> COLUMN 	NOMUSER		FORMAT A12 
SQL> COLUMN	TYPEMVT		FORMAT A6 
SQL> COLUMN	REFART 		FORMAT A6
SQL> COLUMN	NOMART		FORMAT A11
SQL> COLUMN	PVART		FORMAT 999.99
SQL> COLUMN	PAART		FORMAT 999.99
SQL> COLUMN	QSART		FORMAT 999
SQL> COLUMN	DATMVT		FORMAT A19
SQL> PROMPT =====================================================================
=====================================================================
SQL> PROMPT Suppression et Insertion dans la table ARTICLES (par user-X par exemple)
Suppression et Insertion dans la table ARTICLES (par user-X par exemple)
SQL> PROMPT =====================================================================
=====================================================================
SQL> PROMPT

SQL> DELETE
FROM	ARTICLES
WHERE	REFART = 'WD.012';

0 lignes supprimé.

Elapsed: 00:00:00.003
SQL> INSERT INTO ARTICLES (REFART, NOMART, PVART, QSART, PAART)
VALUES ('WD.012', 'Exemple de DVD BIS', 25.00, 5, 10.00);

1 ligne inséré.

Elapsed: 00:00:00.002
SQL> PROMPT =====================================================================
=====================================================================
SQL> PROMPT Mouvements dans la table ARTICLES effectués par des utilisateurs
Mouvements dans la table ARTICLES effectués par des utilisateurs
SQL> PROMPT externes: user-y et user-X
externes: user-y et user-X
SQL> PROMPT =====================================================================
=====================================================================
SQL> PROMPT

SQL> PROMPT

SQL> --Pause Tapez sur Enter...
SQL> PROMPT

SQL> PROMPT =====================================================================
=====================================================================
SQL> PROMPT Visualisation de la table HISTORIQUE_MVTS_ARTICLES
Visualisation de la table HISTORIQUE_MVTS_ARTICLES
SQL> PROMPT =====================================================================
=====================================================================
SQL> PROMPT

SQL> TTITLE CENTER 'Visualisation de la table HISTORIQUE_MVTS_ARTICLES' skip 1 -
       LEFT   '=========================================================================' skip 0
SQL> SELECT	*
FROM	HISTORIQUE_MVTS_ARTICLES;

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           Visualisation de la table HISTORIQUE_MVTS_ARTICLES                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           
=========================================================================                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        
NOMUSER      TYPEMV REFART NOMART        PVART   PAART QSART DATMVT            
------------ ------ ------ ----------- ------- ------- ----- -------------------
MALEKUS      INSERT F1.001 SIEGE DE TA   35.00   26.43    10 SAMEDI   27-OCTOBRE
                           BLE                                 -2018            

MALEKUS      INSERT F1.002 CASQUE CYCL   27.00   20.00    20 SAMEDI   27-OCTOBRE
                           ISTE PROTEC                         -2018            
                           TION                                                 

MALEKUS      INSERT F1.003 BONNET PARE   10.71    5.71   100 SAMEDI   27-OCTOBRE
                           -CHOCS                              -2018            

MALEKUS      INSERT F1.004 STORE DE PR    7.43    4.29     5 SAMEDI   27-OCTOBRE
                           OTECTION                            -2018            

MALEKUS      INSERT F1.005 COINS DE PR    4.00    1.71   100 SAMEDI   27-OCTOBRE
                           OTECTION                            -2018            

MALEKUS      INSERT F1.006 CACHE PRISE    2.29     .71   500 SAMEDI   27-OCTOBRE
                            DE COURANT                         -2018            

MALEKUS      INSERT F1.007 BLOQUE PORT    5.00    2.29     4 SAMEDI   27-OCTOBRE
                           E                                   -2018            

MALEKUS      INSERT F1.008 BANDE DE FE    3.29    1.71     4 SAMEDI   27-OCTOBRE
                           RMETURE                             -2018            

MALEKUS      INSERT F1.009 PROTECTION    37.86   26.43    10 SAMEDI   27-OCTOBRE
                           DE FOUR                             -2018            

MALEKUS      INSERT F1.010 PROTECTION    30.71   22.86    10 SAMEDI   27-OCTOBRE
                           DE CUISINIE                         -2018            
                           RE                                                   

MALEKUS      INSERT F1.011 BABY PHONE    80.71   45.71     3 SAMEDI   27-OCTOBRE
                                                               -2018            

MALEKUS      INSERT F1.012 BRETELLE DE   15.57   11.43     8 SAMEDI   27-OCTOBRE
                            SECURITE                           -2018            

MALEKUS      INSERT F1.013 HAUSSE-CHAI   42.71   25.43     1 SAMEDI   27-OCTOBRE
                           SE                                  -2018            

MALEKUS      INSERT F1.014 COUVRE ROBI    7.86    4.29    12 SAMEDI   27-OCTOBRE
                           NETTERIE                            -2018            

MALEKUS      INSERT F2.001 BARRIERE DE   32.71   25.71     2 SAMEDI   27-OCTOBRE
                            PORTE, EN                          -2018            
                           BOIS                                                 

MALEKUS      INSERT F2.002 BARRIERE DE   49.14   28.43     3 SAMEDI   27-OCTOBRE
                            PORTE, EN                          -2018            
                           METAL                                                

MALEKUS      INSERT F2.003 BARRIERE DE   23.71   15.71    10 SAMEDI   27-OCTOBRE
                            LIT                                -2018            

MALEKUS      INSERT F2.004 PORTE-BEBE    44.86   34.29     6 SAMEDI   27-OCTOBRE
                                                               -2018            

MALEKUS      INSERT F2.005 SIEGE-AUTO   126.86   71.43     2 SAMEDI   27-OCTOBRE
                           COSMOS                              -2018            

MALEKUS      INSERT F2.006 SIEGE-AUTO   121.29   71.43     2 SAMEDI   27-OCTOBRE
                           EUROSEAT                            -2018            

MALEKUS      INSERT FB.001 DVD-SPIRIT    24.90   12.00     2 SAMEDI   27-OCTOBRE
                                                               -2018            

MALEKUS      INSERT FB.002 DVD-SPIDER    24.90   12.00     2 SAMEDI   27-OCTOBRE
                           MAN                                 -2018            

MALEKUS      INSERT FB.003 DVD-SPIDER    24.90   12.00     2 SAMEDI   27-OCTOBRE
                           MAN 2                               -2018            

MALEKUS      INSERT WD.001 K7 VIDEO-TO   21.29    9.29    10 SAMEDI   27-OCTOBRE
                           Y STORY                             -2018            

MALEKUS      INSERT WD.002 DVD-TOY STO   34.29   12.14    10 SAMEDI   27-OCTOBRE
                           RY 2                                -2018            

MALEKUS      INSERT WD.003 K7 VIDEO-WI   22.86    9.29     5 SAMEDI   27-OCTOBRE
                           NNIE L OURS                         -2018            
                           ON                                                   

MALEKUS      INSERT WD.004 DVD-FRERES    35.00   13.00     3 SAMEDI   27-OCTOBRE
                           DES OURS                            -2018            

MALEKUS      INSERT WD.005 K7 VIDEO-LE   30.00   13.00     1 SAMEDI   27-OCTOBRE
                            ROI LION                           -2018            

MALEKUS      INSERT WD.006 K7 VIDEO-LE   30.00   13.00     4 SAMEDI   27-OCTOBRE
                            ROI LION 2                         -2018            

MALEKUS      INSERT WD.007 K7 VIDEO-LE   30.00   13.00     3 SAMEDI   27-OCTOBRE
                            ROI LION 3                         -2018            

MALEKUS      INSERT WD.010 K7 VIDEO-Ex   30.00   13.00     3 SAMEDI   27-OCTOBRE
                           emple de k7                         -2018            

MALEKUS      INSERT WD.011 Exemple de    25.00   10.00     5 SAMEDI   27-OCTOBRE
                           DVD                                 -2018            

MALEKUS      UPDATE WD.010 K7 VIDEO-Ex   30.00   13.00     3 SAMEDI   27-OCTOBRE
                           emple de k7                         -2018            

MALEKUS      UPDATE WD.011 Exemple de    25.00   10.00     5 SAMEDI   27-OCTOBRE
                           DVD                                 -2018            

MALEKUS      INSERT WD.012 Exemple de    25.00   10.00     5 SAMEDI   27-OCTOBRE
                           DVD BIS                             -2018            


 35 lignes sélectionnées 

Elapsed: 00:00:00.018
SQL> -- __________________________________________________________________________
SQL> -- 
SQL> -- Résultat généré:
SQL> --
SQL> --      Visualisation de la table HISTORIQUE_MVTS_ARTICLES
SQL> -- =========================================================================
SQL> --
SQL> -- __________________________________________________________________________
SQL> PROMPT

SQL> --Pause Tapez sur Enter...
SQL> PROMPT

SQL> PROMPT =====================================================================
=====================================================================
SQL> PROMPT Suppression et insertion dans la table ARTICLES.
Suppression et insertion dans la table ARTICLES.
SQL> PROMPT =====================================================================
=====================================================================
SQL> PROMPT

SQL> DELETE	FROM	ARTICLES
WHERE	REFART = 'WD.012';

1 ligne supprimé.

Elapsed: 00:00:00.005
SQL> INSERT INTO ARTICLES (REFART, NOMART, PVART, QSART, PAART)
VALUES ('WD.012', 'le roi de la jungle 1', 29.99, 5, 13.00);

1 ligne inséré.

Elapsed: 00:00:00.002
SQL> INSERT INTO ARTICLES (REFART, NOMART, PVART, QSART, PAART)
VALUES ('WD.023', 'le roi de la jungle 2', 39.99, 5, 21.00);

1 ligne inséré.

Elapsed: 00:00:00.003
SQL> COMMIT;
Validation (commit) terminée.
Elapsed: 00:00:00.001
SQL> PROMPT =====================================================================
=====================================================================
SQL> PROMPT Visualisation de la table HISTORIQUE_MVTS_ARTICLES
Visualisation de la table HISTORIQUE_MVTS_ARTICLES
SQL> PROMPT =====================================================================
=====================================================================
SQL> PROMPT

SQL> TTITLE CENTER 'Visualisation de la table HISTORIQUE_MVTS_ARTICLES' skip 1 -
       LEFT   '=========================================================================' skip 0
SQL> SELECT	*
FROM	HISTORIQUE_MVTS_ARTICLES;

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           Visualisation de la table HISTORIQUE_MVTS_ARTICLES                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           
=========================================================================                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        
NOMUSER      TYPEMV REFART NOMART        PVART   PAART QSART DATMVT            
------------ ------ ------ ----------- ------- ------- ----- -------------------
MALEKUS      INSERT F1.001 SIEGE DE TA   35.00   26.43    10 SAMEDI   27-OCTOBRE
                           BLE                                 -2018            

MALEKUS      INSERT F1.002 CASQUE CYCL   27.00   20.00    20 SAMEDI   27-OCTOBRE
                           ISTE PROTEC                         -2018            
                           TION                                                 

MALEKUS      INSERT F1.003 BONNET PARE   10.71    5.71   100 SAMEDI   27-OCTOBRE
                           -CHOCS                              -2018            

MALEKUS      INSERT F1.004 STORE DE PR    7.43    4.29     5 SAMEDI   27-OCTOBRE
                           OTECTION                            -2018            

MALEKUS      INSERT F1.005 COINS DE PR    4.00    1.71   100 SAMEDI   27-OCTOBRE
                           OTECTION                            -2018            

MALEKUS      INSERT F1.006 CACHE PRISE    2.29     .71   500 SAMEDI   27-OCTOBRE
                            DE COURANT                         -2018            

MALEKUS      INSERT F1.007 BLOQUE PORT    5.00    2.29     4 SAMEDI   27-OCTOBRE
                           E                                   -2018            

MALEKUS      INSERT F1.008 BANDE DE FE    3.29    1.71     4 SAMEDI   27-OCTOBRE
                           RMETURE                             -2018            

MALEKUS      INSERT F1.009 PROTECTION    37.86   26.43    10 SAMEDI   27-OCTOBRE
                           DE FOUR                             -2018            

MALEKUS      INSERT F1.010 PROTECTION    30.71   22.86    10 SAMEDI   27-OCTOBRE
                           DE CUISINIE                         -2018            
                           RE                                                   

MALEKUS      INSERT F1.011 BABY PHONE    80.71   45.71     3 SAMEDI   27-OCTOBRE
                                                               -2018            

MALEKUS      INSERT F1.012 BRETELLE DE   15.57   11.43     8 SAMEDI   27-OCTOBRE
                            SECURITE                           -2018            

MALEKUS      INSERT F1.013 HAUSSE-CHAI   42.71   25.43     1 SAMEDI   27-OCTOBRE
                           SE                                  -2018            

MALEKUS      INSERT F1.014 COUVRE ROBI    7.86    4.29    12 SAMEDI   27-OCTOBRE
                           NETTERIE                            -2018            

MALEKUS      INSERT F2.001 BARRIERE DE   32.71   25.71     2 SAMEDI   27-OCTOBRE
                            PORTE, EN                          -2018            
                           BOIS                                                 

MALEKUS      INSERT F2.002 BARRIERE DE   49.14   28.43     3 SAMEDI   27-OCTOBRE
                            PORTE, EN                          -2018            
                           METAL                                                

MALEKUS      INSERT F2.003 BARRIERE DE   23.71   15.71    10 SAMEDI   27-OCTOBRE
                            LIT                                -2018            

MALEKUS      INSERT F2.004 PORTE-BEBE    44.86   34.29     6 SAMEDI   27-OCTOBRE
                                                               -2018            

MALEKUS      INSERT F2.005 SIEGE-AUTO   126.86   71.43     2 SAMEDI   27-OCTOBRE
                           COSMOS                              -2018            

MALEKUS      INSERT F2.006 SIEGE-AUTO   121.29   71.43     2 SAMEDI   27-OCTOBRE
                           EUROSEAT                            -2018            

MALEKUS      INSERT FB.001 DVD-SPIRIT    24.90   12.00     2 SAMEDI   27-OCTOBRE
                                                               -2018            

MALEKUS      INSERT FB.002 DVD-SPIDER    24.90   12.00     2 SAMEDI   27-OCTOBRE
                           MAN                                 -2018            

MALEKUS      INSERT FB.003 DVD-SPIDER    24.90   12.00     2 SAMEDI   27-OCTOBRE
                           MAN 2                               -2018            

MALEKUS      INSERT WD.001 K7 VIDEO-TO   21.29    9.29    10 SAMEDI   27-OCTOBRE
                           Y STORY                             -2018            

MALEKUS      INSERT WD.002 DVD-TOY STO   34.29   12.14    10 SAMEDI   27-OCTOBRE
                           RY 2                                -2018            

MALEKUS      INSERT WD.003 K7 VIDEO-WI   22.86    9.29     5 SAMEDI   27-OCTOBRE
                           NNIE L OURS                         -2018            
                           ON                                                   

MALEKUS      INSERT WD.004 DVD-FRERES    35.00   13.00     3 SAMEDI   27-OCTOBRE
                           DES OURS                            -2018            

MALEKUS      INSERT WD.005 K7 VIDEO-LE   30.00   13.00     1 SAMEDI   27-OCTOBRE
                            ROI LION                           -2018            

MALEKUS      INSERT WD.006 K7 VIDEO-LE   30.00   13.00     4 SAMEDI   27-OCTOBRE
                            ROI LION 2                         -2018            

MALEKUS      INSERT WD.007 K7 VIDEO-LE   30.00   13.00     3 SAMEDI   27-OCTOBRE
                            ROI LION 3                         -2018            

MALEKUS      INSERT WD.010 K7 VIDEO-Ex   30.00   13.00     3 SAMEDI   27-OCTOBRE
                           emple de k7                         -2018            

MALEKUS      INSERT WD.011 Exemple de    25.00   10.00     5 SAMEDI   27-OCTOBRE
                           DVD                                 -2018            

MALEKUS      UPDATE WD.010 K7 VIDEO-Ex   30.00   13.00     3 SAMEDI   27-OCTOBRE
                           emple de k7                         -2018            

MALEKUS      UPDATE WD.011 Exemple de    25.00   10.00     5 SAMEDI   27-OCTOBRE
                           DVD                                 -2018            

MALEKUS      INSERT WD.012 Exemple de    25.00   10.00     5 SAMEDI   27-OCTOBRE
                           DVD BIS                             -2018            

MALEKUS      DELETE WD.012 Exemple de    25.00   10.00     5 SAMEDI   27-OCTOBRE
                           DVD BIS                             -2018            

MALEKUS      INSERT WD.012 le roi de l   29.99   13.00     5 SAMEDI   27-OCTOBRE
                           a jungle 1                          -2018            

MALEKUS      INSERT WD.023 le roi de l   39.99   21.00     5 SAMEDI   27-OCTOBRE
                           a jungle 2                          -2018            


 38 lignes sélectionnées 

Elapsed: 00:00:00.021
SQL> -- __________________________________________________________________________
SQL> -- 
SQL> -- Résultat généré:
SQL> --
SQL> --      Visualisation de la table HISTORIQUE_MVTS_ARTICLES
SQL> -- =========================================================================
SQL> -- __________________________________________________________________________
SQL> PROMPT

SQL> --Pause Tapez sur Enter...
SQL> PROMPT

SQL> PROMPT 

SQL> PROMPT =====================================================================
=====================================================================
SQL> PROMPT |                                                                   |
|                                                                   |
SQL> PROMPT |      Historique des mouvements des articles                       |
|      Historique des mouvements des articles                       |
SQL> PROMPT |                                                                   |
|                                                                   |
SQL> PROMPT =====================================================================
=====================================================================
SQL> PROMPT

SQL> PROMPT

SQL> PROMPT =====================================================================
=====================================================================
SQL> PROMPT Mise à jour dans la table ARTICLES pour effectuer les tests.
Mise à jour dans la table ARTICLES pour effectuer les tests.
SQL> PROMPT =====================================================================
=====================================================================
SQL> PROMPT

SQL> UPDATE	ARTICLES
SET	PVART = 35.00, PAART = 10.90, QSART = 12
WHERE	REFART = 'WD.012';

1 ligne mis à jour.

Elapsed: 00:00:00.004
SQL> UPDATE	ARTICLES
SET	PVART = 50.00, PAART = 25.00, QSART = 10
WHERE	REFART = 'WD.012';

1 ligne mis à jour.

Elapsed: 00:00:00.005
SQL> UPDATE	ARTICLES
SET	PVART = 25.00, PAART = 5.00, QSART = 52
WHERE	REFART = 'WD.012';

1 ligne mis à jour.

Elapsed: 00:00:00.004
SQL> COMMIT;
Validation (commit) terminée.
Elapsed: 00:00:00.001
SQL> PROMPT =====================================================================
=====================================================================
SQL> PROMPT Visualisation de la table HISTORIQUE_MVTS_ARTICLES
Visualisation de la table HISTORIQUE_MVTS_ARTICLES
SQL> PROMPT =====================================================================
=====================================================================
SQL> PROMPT

SQL> TTITLE CENTER 'Visualisation de la table HISTORIQUE_MVTS_ARTICLES' skip 1 -
       LEFT   '=========================================================================' skip 0
SQL> SELECT	*
FROM	HISTORIQUE_MVTS_ARTICLES;

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           Visualisation de la table HISTORIQUE_MVTS_ARTICLES                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           
=========================================================================                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        
NOMUSER      TYPEMV REFART NOMART        PVART   PAART QSART DATMVT            
------------ ------ ------ ----------- ------- ------- ----- -------------------
MALEKUS      INSERT F1.001 SIEGE DE TA   35.00   26.43    10 SAMEDI   27-OCTOBRE
                           BLE                                 -2018            

MALEKUS      INSERT F1.002 CASQUE CYCL   27.00   20.00    20 SAMEDI   27-OCTOBRE
                           ISTE PROTEC                         -2018            
                           TION                                                 

MALEKUS      INSERT F1.003 BONNET PARE   10.71    5.71   100 SAMEDI   27-OCTOBRE
                           -CHOCS                              -2018            

MALEKUS      INSERT F1.004 STORE DE PR    7.43    4.29     5 SAMEDI   27-OCTOBRE
                           OTECTION                            -2018            

MALEKUS      INSERT F1.005 COINS DE PR    4.00    1.71   100 SAMEDI   27-OCTOBRE
                           OTECTION                            -2018            

MALEKUS      INSERT F1.006 CACHE PRISE    2.29     .71   500 SAMEDI   27-OCTOBRE
                            DE COURANT                         -2018            

MALEKUS      INSERT F1.007 BLOQUE PORT    5.00    2.29     4 SAMEDI   27-OCTOBRE
                           E                                   -2018            

MALEKUS      INSERT F1.008 BANDE DE FE    3.29    1.71     4 SAMEDI   27-OCTOBRE
                           RMETURE                             -2018            

MALEKUS      INSERT F1.009 PROTECTION    37.86   26.43    10 SAMEDI   27-OCTOBRE
                           DE FOUR                             -2018            

MALEKUS      INSERT F1.010 PROTECTION    30.71   22.86    10 SAMEDI   27-OCTOBRE
                           DE CUISINIE                         -2018            
                           RE                                                   

MALEKUS      INSERT F1.011 BABY PHONE    80.71   45.71     3 SAMEDI   27-OCTOBRE
                                                               -2018            

MALEKUS      INSERT F1.012 BRETELLE DE   15.57   11.43     8 SAMEDI   27-OCTOBRE
                            SECURITE                           -2018            

MALEKUS      INSERT F1.013 HAUSSE-CHAI   42.71   25.43     1 SAMEDI   27-OCTOBRE
                           SE                                  -2018            

MALEKUS      INSERT F1.014 COUVRE ROBI    7.86    4.29    12 SAMEDI   27-OCTOBRE
                           NETTERIE                            -2018            

MALEKUS      INSERT F2.001 BARRIERE DE   32.71   25.71     2 SAMEDI   27-OCTOBRE
                            PORTE, EN                          -2018            
                           BOIS                                                 

MALEKUS      INSERT F2.002 BARRIERE DE   49.14   28.43     3 SAMEDI   27-OCTOBRE
                            PORTE, EN                          -2018            
                           METAL                                                

MALEKUS      INSERT F2.003 BARRIERE DE   23.71   15.71    10 SAMEDI   27-OCTOBRE
                            LIT                                -2018            

MALEKUS      INSERT F2.004 PORTE-BEBE    44.86   34.29     6 SAMEDI   27-OCTOBRE
                                                               -2018            

MALEKUS      INSERT F2.005 SIEGE-AUTO   126.86   71.43     2 SAMEDI   27-OCTOBRE
                           COSMOS                              -2018            

MALEKUS      INSERT F2.006 SIEGE-AUTO   121.29   71.43     2 SAMEDI   27-OCTOBRE
                           EUROSEAT                            -2018            

MALEKUS      INSERT FB.001 DVD-SPIRIT    24.90   12.00     2 SAMEDI   27-OCTOBRE
                                                               -2018            

MALEKUS      INSERT FB.002 DVD-SPIDER    24.90   12.00     2 SAMEDI   27-OCTOBRE
                           MAN                                 -2018            

MALEKUS      INSERT FB.003 DVD-SPIDER    24.90   12.00     2 SAMEDI   27-OCTOBRE
                           MAN 2                               -2018            

MALEKUS      INSERT WD.001 K7 VIDEO-TO   21.29    9.29    10 SAMEDI   27-OCTOBRE
                           Y STORY                             -2018            

MALEKUS      INSERT WD.002 DVD-TOY STO   34.29   12.14    10 SAMEDI   27-OCTOBRE
                           RY 2                                -2018            

MALEKUS      INSERT WD.003 K7 VIDEO-WI   22.86    9.29     5 SAMEDI   27-OCTOBRE
                           NNIE L OURS                         -2018            
                           ON                                                   

MALEKUS      INSERT WD.004 DVD-FRERES    35.00   13.00     3 SAMEDI   27-OCTOBRE
                           DES OURS                            -2018            

MALEKUS      INSERT WD.005 K7 VIDEO-LE   30.00   13.00     1 SAMEDI   27-OCTOBRE
                            ROI LION                           -2018            

MALEKUS      INSERT WD.006 K7 VIDEO-LE   30.00   13.00     4 SAMEDI   27-OCTOBRE
                            ROI LION 2                         -2018            

MALEKUS      INSERT WD.007 K7 VIDEO-LE   30.00   13.00     3 SAMEDI   27-OCTOBRE
                            ROI LION 3                         -2018            

MALEKUS      INSERT WD.010 K7 VIDEO-Ex   30.00   13.00     3 SAMEDI   27-OCTOBRE
                           emple de k7                         -2018            

MALEKUS      INSERT WD.011 Exemple de    25.00   10.00     5 SAMEDI   27-OCTOBRE
                           DVD                                 -2018            

MALEKUS      UPDATE WD.010 K7 VIDEO-Ex   30.00   13.00     3 SAMEDI   27-OCTOBRE
                           emple de k7                         -2018            

MALEKUS      UPDATE WD.011 Exemple de    25.00   10.00     5 SAMEDI   27-OCTOBRE
                           DVD                                 -2018            

MALEKUS      INSERT WD.012 Exemple de    25.00   10.00     5 SAMEDI   27-OCTOBRE
                           DVD BIS                             -2018            

MALEKUS      DELETE WD.012 Exemple de    25.00   10.00     5 SAMEDI   27-OCTOBRE
                           DVD BIS                             -2018            

MALEKUS      INSERT WD.012 le roi de l   29.99   13.00     5 SAMEDI   27-OCTOBRE
                           a jungle 1                          -2018            

MALEKUS      INSERT WD.023 le roi de l   39.99   21.00     5 SAMEDI   27-OCTOBRE
                           a jungle 2                          -2018            

MALEKUS      UPDATE WD.012 le roi de l   29.99   13.00     5 SAMEDI   27-OCTOBRE
                           a jungle 1                          -2018            

MALEKUS      UPDATE WD.012 le roi de l   35.00   10.90    12 SAMEDI   27-OCTOBRE
                           a jungle 1                          -2018            

MALEKUS      UPDATE WD.012 le roi de l   50.00   25.00    10 SAMEDI   27-OCTOBRE
                           a jungle 1                          -2018            


 41 lignes sélectionnées 

Elapsed: 00:00:00.025
SQL> -- __________________________________________________________________________
SQL> -- 
SQL> -- Résultat généré:
SQL> --
SQL> --      Visualisation de la table HISTORIQUE_MVTS_ARTICLES
SQL> -- =========================================================================
SQL> -- __________________________________________________________________________
SQL> PROMPT =====================================================================
=====================================================================
SQL> PROMPT Suppression et creation de la table comparaison_art
Suppression et creation de la table comparaison_art
SQL> PROMPT Cette table va permettre de stocker les mouvements dans
Cette table va permettre de stocker les mouvements dans
SQL> PROMPT la table ARTICLES, pendant une période. Tout ça pour pouvoir ensuite
la table ARTICLES, pendant une période. Tout ça pour pouvoir ensuite
SQL> PROMPT étudier l impact de ces mouvements sur le chiffre d affaires durant
étudier l impact de ces mouvements sur le chiffre d affaires durant
SQL> PROMPT la période considérée.
la période considérée.
SQL> PROMPT =====================================================================
=====================================================================
SQL> PROMPT

SQL> DROP TABLE COMPARAISON_ART;

Table COMPARAISON_ART supprimé(e).

Elapsed: 00:00:00.014
SQL> CREATE TABLE COMPARAISON_ART
(
	REFART 		VARCHAR2(10), 
	PVART		NUMBER(10, 2),
	PAART		NUMBER(10, 2),
	QSART		NUMBER(3),
	DATE_DEBUT	INTEGER,
	DATE_FIN	INTEGER
);

Table COMPARAISON_ART créé(e).

Elapsed: 00:00:00.007
SQL> PROMPT

SQL> --Pause Tapez sur Enter...
SQL> PROMPT

SQL> PROMPT =====================================================================
=====================================================================
SQL> PROMPT Suppression et creation de la table comparaison_chiffre_affaires.
Suppression et creation de la table comparaison_chiffre_affaires.
SQL> PROMPT Cette table va permettre de stocker les informations concernant
Cette table va permettre de stocker les informations concernant
SQL> PROMPT le chiffre d affaires moyen des différents pays avant la période où
le chiffre d affaires moyen des différents pays avant la période où
SQL> PROMPT l on a décidé de regarder l impact des mouvements effectués sur
l on a décidé de regarder l impact des mouvements effectués sur
SQL> PROMPT la table ARTICLES. De garder aussi le chiffre d affaires durant
la table ARTICLES. De garder aussi le chiffre d affaires durant
SQL> PROMPT la période considérée. Et aussi, d inscrire la variation au niveau
la période considérée. Et aussi, d inscrire la variation au niveau
SQL> PROMPT des chiffres d affaires.
des chiffres d affaires.
SQL> PROMPT =====================================================================
=====================================================================
SQL> PROMPT

SQL> DROP TABLE COMPARAISON_CHIFFRE_AFFAIRES;

Table COMPARAISON_CHIFFRE_AFFAIRES supprimé(e).

Elapsed: 00:00:00.012
SQL> CREATE TABLE COMPARAISON_CHIFFRE_AFFAIRES
(
	PAYS		VARCHAR2(20),
	DATE_DEBUT	INTEGER,
	DATE_FIN	INTEGER,
	CA_AVANT	NUMBER(10, 2),
	CA_APRES	NUMBER(10, 2),
	VARIATION	NUMBER(10, 2)
);

Table COMPARAISON_CHIFFRE_AFFAIRES créé(e).

Elapsed: 00:00:00.006
SQL> PROMPT

SQL> --Pause Tapez sur Enter...
SQL> PROMPT

SQL> PROMPT =====================================================================
=====================================================================
SQL> PROMPT Creation de vue VUE_ART permettant de garder pour chaque article
Creation de vue VUE_ART permettant de garder pour chaque article
SQL> PROMPT de la table ARTICLES son prix de vente moyen, son prix d achat moyen
de la table ARTICLES son prix de vente moyen, son prix d achat moyen
SQL> PROMPT et sa quantité en stock moyen.
et sa quantité en stock moyen.
SQL> PROMPT =====================================================================
=====================================================================
SQL> PROMPT

SQL> CREATE OR REPLACE VIEW VUE_ART (REFART, A_PVART, A_PAART, A_QSART) AS
(
	SELECT		DISTINCT REFART, AVG(PVART) as A_PVART, AVG(PAART) as A_PAART, AVG(QSART) as A_QSART
	FROM		ARTICLES
	GROUP BY 	REFART
);

View VUE_ART créé(e).

Elapsed: 00:00:00.008
SQL> PROMPT

SQL> --Pause Tapez sur Enter...
SQL> PROMPT

SQL> PROMPT =====================================================================
=====================================================================
SQL> PROMPT Creation de vue VUE_MVTS_ART permettant de garder pour chaque article
Creation de vue VUE_MVTS_ART permettant de garder pour chaque article
SQL> PROMPT de la table HISTORIQUE_MVTS_ARTICLES son prix de vente moyen, son
de la table HISTORIQUE_MVTS_ARTICLES son prix de vente moyen, son
SQL> PROMPT prix d achat moyen et sa quantité en stock moyen. 
prix d achat moyen et sa quantité en stock moyen.
SQL> PROMPT =====================================================================
=====================================================================
SQL> PROMPT

SQL> CREATE OR REPLACE VIEW VUE_MVTS_ART (REFART, A_PVART, A_PAART, A_QSART) AS
(
	SELECT		DISTINCT REFART, AVG(PVART) as A_PVART, AVG(PAART) as A_PAART, AVG(QSART) as A_QSART
	FROM		HISTORIQUE_MVTS_ARTICLES
	WHERE		TYPEMVT = 'UPDATE'
	AND		EXTRACT(YEAR FROM DATMVT) BETWEEN 2006 AND 2007
	GROUP BY 	REFART
);

View VUE_MVTS_ART créé(e).

Elapsed: 00:00:00.007
SQL> PROMPT

SQL> --Pause Tapez sur Enter...
SQL> PROMPT

SQL> PROMPT =====================================================================
=====================================================================
SQL> PROMPT Creation de vue CHIFFRE_AFFAIRES_AVANT permettant de calculer le
Creation de vue CHIFFRE_AFFAIRES_AVANT permettant de calculer le
SQL> PROMPT chiffre d affaires de chaque pays avant une période considérée.
chiffre d affaires de chaque pays avant une période considérée.
SQL> PROMPT =====================================================================
=====================================================================
SQL> PROMPT

SQL> CREATE OR REPLACE VIEW CHIFFRE_AFFAIRES_AVANT AS
(
	SELECT	cl.PAYSCLI, SUM((d.PUART*d.QTCOM) * (1-(d.REMISE/100))) as chiffre_affaire 
	FROM	DETAILCOM d, CLIENTS cl, COMMANDES c
	WHERE	d.NUMCOM  = c.NUMCOM
	AND	cl.CODCLI = c.CODCLI
	AND	EXTRACT(YEAR FROM c.DATCOM) < 2006
	GROUP BY cl.PAYSCLI
);

View CHIFFRE_AFFAIRES_AVANT créé(e).

Elapsed: 00:00:00.008
SQL> PROMPT

SQL> --Pause Tapez sur Enter...
SQL> PROMPT

SQL> PROMPT =====================================================================
=====================================================================
SQL> PROMPT Creation de vue CHIFFRE_AFFAIRES_APRES permettant de calculer le
Creation de vue CHIFFRE_AFFAIRES_APRES permettant de calculer le
SQL> PROMPT chiffre d affaires de chaque pays durant la période considérée.
chiffre d affaires de chaque pays durant la période considérée.
SQL> PROMPT =====================================================================
=====================================================================
SQL> PROMPT

SQL> CREATE OR REPLACE VIEW CHIFFRE_AFFAIRES_APRES (PAYSCLI, CHIFFAFF, ) AS 
(
	SELECT	cl.PAYSCLI, SUM((d.PUART*d.QTCOM) * (1-(d.REMISE/100))) as chiffre_affaires 
	FROM	DETAILCOM d, CLIENTS cl, COMMANDES c
	WHERE	d.NUMCOM  = c.NUMCOM
	AND	cl.CODCLI = c.CODCLI
	AND	EXTRACT(YEAR FROM c.DATCOM) BETWEEN 2006 AND 2007
	GROUP BY cl.PAYSCLI
);

Erreur commençant à la ligne: 1 521 de la commande -
CREATE OR REPLACE VIEW CHIFFRE_AFFAIRES_APRES (PAYSCLI, CHIFFAFF, ) AS 
(
	SELECT	cl.PAYSCLI, SUM((d.PUART*d.QTCOM) * (1-(d.REMISE/100))) as chiffre_affaires 
	FROM	DETAILCOM d, CLIENTS cl, COMMANDES c
	WHERE	d.NUMCOM  = c.NUMCOM
	AND	cl.CODCLI = c.CODCLI
	AND	EXTRACT(YEAR FROM c.DATCOM) BETWEEN 2006 AND 2007
	GROUP BY cl.PAYSCLI
)
Rapport d'erreur -
Erreur SQL : ORA-00904: : invalid identifier
00904. 00000 -  "%s: invalid identifier"
*Cause:    
*Action:
Elapsed: 00:00:00.008
SQL> PROMPT

SQL> --Pause Tapez sur Enter...
SQL> PROMPT

SQL> PROMPT =====================================================================
=====================================================================
SQL> PROMPT Creation de procedure MOYENNE_PRIX_ART permettant de calculer le prix
Creation de procedure MOYENNE_PRIX_ART permettant de calculer le prix
SQL> PROMPT moyen d achat et de vente, et la quantité moyenne en stock de chaque
moyen d achat et de vente, et la quantité moyenne en stock de chaque
SQL> PROMPT article. Et ensuite de calculer le chiffre d affaires avant et pendant
article. Et ensuite de calculer le chiffre d affaires avant et pendant
SQL> PROMPT une période considérée. Tout cela pour savoir si les mouvements
une période considérée. Tout cela pour savoir si les mouvements
SQL> PROMPT effectués, durant une période considérée, sur la table ARTICLES ont
effectués, durant une période considérée, sur la table ARTICLES ont
SQL> PROMPT apporté plus ou moins d argent.
apporté plus ou moins d argent.
SQL> PROMPT =====================================================================
=====================================================================
SQL> PROMPT

SQL> CREATE OR REPLACE PROCEDURE MOYENNE_PRIX_ART IS
	CURSOR curseur IS 
		SELECT	DISTINCT REFART 
		FROM	VUE_MVTS_ART;

	CURSOR curseurBIS IS 
		SELECT	DISTINCT PAYSCLI 
		FROM	CLIENTS;

		
	V_REFART 	VARCHAR2(10); 
	V_PVART		NUMBER(10, 2);
	V_PAART		NUMBER(10, 2);
	V_QSART		NUMBER(3);
	V_CA_AVANT	NUMBER(10, 2);
	V_CA_APRES	NUMBER(10, 2);
	V_VARIATION	NUMBER(10, 2);
	V_PAYS		VARCHAR2(20);
		
	V1_PVART	NUMBER(10, 2);
	V1_PAART	NUMBER(10, 2);
	V1_QSART	NUMBER(3);
	
	V2_PVART	NUMBER(10, 2);
	V2_PAART	NUMBER(10, 2);
	V2_QSART	NUMBER(3);
BEGIN
	FOR c IN curseur LOOP
		SELECT	REFART, A_PVART, A_PAART, A_QSART INTO V_REFART, V1_PVART, V1_PAART, V1_QSART
		FROM	VUE_MVTS_ART
		WHERE	REFART = c.REFART;	
		
		SELECT	REFART, A_PVART, A_PAART, A_QSART INTO V_REFART, V2_PVART, V2_PAART, V2_QSART
		FROM	VUE_ART
		WHERE	REFART = c.REFART;	
		
		V_PVART := (V1_PVART + V2_PVART) /2;
		V_PAART := (V1_PAART + V2_PAART) /2;
		V_QSART := (V1_QSART + V2_QSART) /2;
	
		INSERT INTO COMPARAISON_ART
		VALUES (V_REFART, V_PVART, V_PAART, V_QSART, 2006, 2007);
		
	END LOOP;

	FOR cBIS IN curseurBIS LOOP
		SELECT	PAYSCLI, CHIFFRE_AFFAIRE INTO V_PAYS, V_CA_AVANT
		FROM	CHIFFRE_AFFAIRE_AVANT
		WHERE	PAYSCLI = cBIS.PAYSCLI;
			
		SELECT	PAYSCLI, CHIFFRE_AFFAIRE INTO V_PAYS, V_CA_APRES
		FROM	CHIFFRE_AFFAIRE_APRES
		WHERE	PAYSCLI = cBIS.PAYSCLI;
		
		V_VARIATION := V_CA_APRES - V_CA_AVANT;		
		
		INSERT INTO COMPARAISON_CHIFFRE_AFFAIRES
		VALUES (V_PAYS, 2006, 2007, V_CA_AVANT, V_CA_APRES, V_VARIATION); 
	END LOOP;
END;
/

Elément Procedure MOYENNE_PRIX_ART compilé

Errors: check compiler log
Elapsed: 00:00:00.026
SQL> PROMPT

SQL> --Pause Tapez sur Enter...
SQL> PROMPT

SQL> PROMPT =====================================================================
=====================================================================
SQL> PROMPT Execution de procedure
Execution de procedure
SQL> PROMPT =====================================================================
=====================================================================
SQL> PROMPT

SQL> EXECUTE MOYENNE_PRIX_ART

Erreur commençant à la ligne: 1 614 de la commande -
EXECUTE MOYENNE_PRIX_ART
Rapport d'erreur -
ORA-06550: line 1, column 7:
PLS-00905: object MALEKUS.MOYENNE_PRIX_ART is invalid
ORA-06550: line 1, column 7:
PL/SQL: Statement ignored
06550. 00000 -  "line %s, column %s:\n%s"
*Cause:    Usually a PL/SQL compilation error.
*Action:
SQL> PROMPT

SQL> --Pause Tapez sur Enter...
SQL> PROMPT

SQL> PROMPT =====================================================================
=====================================================================
SQL> PROMPT Visualisation des tables COMPARAISON_ART et
Visualisation des tables COMPARAISON_ART et
SQL> PROMPT COMPARAISON_CHIFFRE_AFFAIRES
COMPARAISON_CHIFFRE_AFFAIRES
SQL> PROMPT =====================================================================
=====================================================================
SQL> PROMPT

SQL> TTITLE CENTER 'Visualisation de la table COMPARAISON_ART' skip 1 -
       LEFT   '=========================================================================' skip 0
SQL> SELECT * FROM COMPARAISON_ART;

aucune ligne sélectionnée


Elapsed: 00:00:00.004
SQL> -- >>>>>>>>>>>>>>>>>>>>>>>>>> -- Résultat généré:
SQL> --
SQL> --    Visualisation de la table COMPARAISON_ART
SQL> -- ??
SQL> PROMPT

SQL> --Pause Tapez sur Enter...
SQL> PROMPT

SQL> TTITLE CENTER 'Visualisation de la table COMPARAISON_CHIFFRE_AFFAIRES' skip 1 -
       LEFT   '=========================================================================' skip 0
SQL> SELECT * FROM COMPARAISON_CHIFFRE_AFFAIRES;

aucune ligne sélectionnée


Elapsed: 00:00:00.003
SQL> -- >>>>>>>>>>>>>>>>>>>>>>>>>> -- Résultat généré:
SQL> --
SQL> --      Visualisation de la table COMPARAISON_CHIFFRE_AFFAIRE
SQL> --??
SQL> PROMPT

SQL> --Pause Tapez sur Enter...
SQL> PROMPT

SQL> --======================================================================================
SQL> --======================================================================================
SQL> --======================================================================================
SQL> --======================================================================================
SQL> --======================================================================================
SQL> --======================================================================================
SQL> PROMPT =====================================================================
=====================================================================
SQL> PROMPT >> Requete  : Articles toujours commandés ensemble
>> Requete  : Articles toujours commandés ensemble
SQL> PROMPT =====================================================================
=====================================================================
SQL> PROMPT

SQL> TTITLE CENTER 'Requete: les articles qui sont toujours commandés ensemble' skip 1 -
       LEFT   '=========================================================================' skip 0
SQL> -- >>>>>>>>>>>>>>>>>>>>>>>>>> -- Résultat généré:
SQL> -- Le(s) les articles qui sont toujours commandés ensemble sont :
SQL> --??
SQL> -- FB FB FB FB FB FB A compléter
SQL> -- >>>>>>>>>>>>>>>>>>>>>>>>>> -- Résultat généré:
SQL> -- Le(s) les articles qui sont toujours commandés ensemble sont :
SQL> --??
SQL> -- FB FB FB FB FB FB A compléter
SQL> --
SQL> -- ************************************************************************************************ 
SQL> -- ************************************************************************************************ 
SQL> -- ************************************************************************************************ 
SQL> -- ************************************************************************************************ 
SQL> -- ************************************************************************************************ 
SQL> -- **********    Historique des mouvements des clients                             **************** 
SQL> -- ************************************************************************************************
SQL> -- ************************************************************************************************ 
SQL> -- ************************************************************************************************ 
SQL> -- ************************************************************************************************ 
SQL> -- ************************************************************************************************ 
SQL> -- Manipulations pour vérifier les TRIGGERS des lignes dans les tables ============================
SQL> -- Table des Clients
SQL> -- FB FB FB FB FB FB A compléter
SQL> --=================================================================================================
SQL> --=================================================================================================
SQL> --=================================================================================================
SQL> --=================================================================================================
SQL> --=================================================================================================
SQL> --=================================================================================================
SQL> --=================================================================================================
SQL> --= Manipulation intelligente des données : Dépendances Fonctionnelles   =============== DEBUT ====
SQL> --=================================================================================================
SQL> --=================================================================================================
SQL> --=================================================================================================
SQL> --=================================================================================================
SQL> -- MFB FFF +++
SQL> /*

Requêtes Ji (PL/SQL Procédures-Fonctions ; pour vérifier la Cohérence globale des données ;
>>>>>>>>>>>>>> Qualité des données

Développez une procédure PL/SQL qui permet de vérifier certaines dépendances fonctionnelles dans la table des clients !

-- ????????????      FB FB FB FB FB FB A compléter ??????????????
*/
SQL> DROP TABLE VILPAYSDF ;

Table VILPAYSDF supprimé(e).

Elapsed: 00:00:00.011
SQL> CREATE TABLE VILPAYSDF (COL1 VARCHAR2(20), COL2 VARCHAR2(20));

Table VILPAYSDF créé(e).

Elapsed: 00:00:00.008
SQL> INSERT INTO VILPAYSDF VALUES ('EPINAY-SUR-SEINE', 'FRANCE');

1 ligne inséré.

Elapsed: 00:00:00.002
SQL> INSERT INTO VILPAYSDF VALUES ('PARIS', 'FRANCE');

1 ligne inséré.

Elapsed: 00:00:00.002
SQL> INSERT INTO VILPAYSDF VALUES ('VILLETANEUSE', 'FRANCE');

1 ligne inséré.

Elapsed: 00:00:00.001
SQL> INSERT INTO VILPAYSDF VALUES ('EPINAY-SUR-SEINE', '');

1 ligne inséré.

Elapsed: 00:00:00.003
SQL> INSERT INTO VILPAYSDF VALUES ('EPINAY SUR SEINE', 'FRANCE');

1 ligne inséré.

Elapsed: 00:00:00.002
SQL> INSERT INTO VILPAYSDF VALUES ('PARIS', 'FRANCE');

1 ligne inséré.

Elapsed: 00:00:00.001
SQL> INSERT INTO VILPAYSDF VALUES ('PARIS', '');

1 ligne inséré.

Elapsed: 00:00:00.002
SQL> INSERT INTO VILPAYSDF VALUES ('PARIS', 'FRANCE');

1 ligne inséré.

Elapsed: 00:00:00.001
SQL> INSERT INTO VILPAYSDF VALUES ('MARSEILLE', 'FRANCE');

1 ligne inséré.

Elapsed: 00:00:00.001
SQL> INSERT INTO VILPAYSDF VALUES ('ORLY-VILLE', 'FRANCE');

1 ligne inséré.

Elapsed: 00:00:00.001
SQL> INSERT INTO VILPAYSDF VALUES ('MARSEILLE', 'FRANC');

1 ligne inséré.

Elapsed: 00:00:00.002
SQL> INSERT INTO VILPAYSDF VALUES ('PARYS', 'FR');

1 ligne inséré.

Elapsed: 00:00:00.002
SQL> INSERT INTO VILPAYSDF VALUES ('EPINAY-SUR-SEINE', 'FRANCE');

1 ligne inséré.

Elapsed: 00:00:00.001
SQL> INSERT INTO VILPAYSDF VALUES ('PARIS', 'france');

1 ligne inséré.

Elapsed: 00:00:00.001
SQL> INSERT INTO VILPAYSDF VALUES ('Bruxelles', 'Belgique');

1 ligne inséré.

Elapsed: 00:00:00.002
SQL> COMMIT;
Validation (commit) terminée.
Elapsed: 00:00:00.001
SQL> REM VISUALISATION DES DONNEES
SQL> SELECT * FROM VILPAYSDF;

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          Requete:lesarticlesquisonttoujourscommandésensemble                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           
=========================================================================                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        
COL1                 COL2               
-------------------- --------------------
EPINAY-SUR-SEINE     FRANCE              
PARIS                FRANCE              
VILLETANEUSE         FRANCE              
EPINAY-SUR-SEINE                         
EPINAY SUR SEINE     FRANCE              
PARIS                FRANCE              
PARIS                                    
PARIS                FRANCE              
MARSEILLE            FRANCE              
ORLY-VILLE           FRANCE              
MARSEILLE            FRANC               
PARYS                FR                  
EPINAY-SUR-SEINE     FRANCE              
PARIS                france              
Bruxelles            Belgique            

 15 lignes sélectionnées 

Elapsed: 00:00:00.009
SQL> REM HOMOGENEISATION DES DONNEES : TOUT EN MAJUSCULE
SQL> UPDATE VILPAYSDF SET COL1 = UPPER(COL1);

15 lignes mis à jour.

Elapsed: 00:00:00.003
SQL> UPDATE VILPAYSDF SET COL2 = UPPER(COL2);

15 lignes mis à jour.

Elapsed: 00:00:00.002
SQL> COMMIT;
Validation (commit) terminée.
Elapsed: 00:00:00.001
SQL> SELECT * FROM VILPAYSDF;

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          Requete:lesarticlesquisonttoujourscommandésensemble                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           
=========================================================================                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        
COL1                 COL2               
-------------------- --------------------
EPINAY-SUR-SEINE     FRANCE              
PARIS                FRANCE              
VILLETANEUSE         FRANCE              
EPINAY-SUR-SEINE                         
EPINAY SUR SEINE     FRANCE              
PARIS                FRANCE              
PARIS                                    
PARIS                FRANCE              
MARSEILLE            FRANCE              
ORLY-VILLE           FRANCE              
MARSEILLE            FRANC               
PARYS                FR                  
EPINAY-SUR-SEINE     FRANCE              
PARIS                FRANCE              
BRUXELLES            BELGIQUE            

 15 lignes sélectionnées 

Elapsed: 00:00:00.007
SQL> -- Algorithme pour vérifier la DF entre 2 colonnes :
SQL> CREATE OR REPLACE VIEW LISTAVERIFIER_VP (VILLE, PAYS) AS
SELECT DISTINCT * FROM VILPAYSDF;

View LISTAVERIFIER_VP créé(e).

Elapsed: 00:00:00.008
SQL> SELECT * FROM LISTAVERIFIER_VP ;

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          Requete:lesarticlesquisonttoujourscommandésensemble                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           
=========================================================================                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        
VILLE                PAYS               
-------------------- --------------------
MARSEILLE            FRANCE              
ORLY-VILLE           FRANCE              
PARYS                FR                  
MARSEILLE            FRANC               
EPINAY-SUR-SEINE     FRANCE              
PARIS                                    
BRUXELLES            BELGIQUE            
PARIS                FRANCE              
VILLETANEUSE         FRANCE              
EPINAY-SUR-SEINE                         
EPINAY SUR SEINE     FRANCE              

 11 lignes sélectionnées 

Elapsed: 00:00:00.009
SQL> CREATE OR REPLACE VIEW VERIFDF_VP (VILLE, NBR) AS
SELECT VILLE, COUNT(*) AS NBR FROM LISTAVERIFIER_VP GROUP BY VILLE ORDER BY VILLE;

View VERIFDF_VP créé(e).

Elapsed: 00:00:00.008
SQL> SELECT * FROM VERIFDF_VP ;

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          Requete:lesarticlesquisonttoujourscommandésensemble                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           
=========================================================================                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        
VILLE                       NBR
-------------------- ----------
BRUXELLES                     1
EPINAY SUR SEINE              1
EPINAY-SUR-SEINE              2
MARSEILLE                     2
ORLY-VILLE                    1
PARIS                         2
PARYS                         1
VILLETANEUSE                  1

 8 lignes sélectionnées 

Elapsed: 00:00:00.011
SQL> SELECT MAX(NBR) AS MAXOCCUR FROM VERIFDF_VP;

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          Requete:lesarticlesquisonttoujourscommandésensemble                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           
=========================================================================                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        
  MAXOCCUR
----------
         2

Elapsed: 00:00:00.011
SQL> -- REM Si MAXOCCUR > 1 Alors la DF n'est pas vérifiée !
SQL> --=================================================================================================
SQL> --=================================================================================================
SQL> --=================================================================================================
SQL> --= Manipulation intelligente des données : Dépendances Fonctionnelles   =============== FIN ======
SQL> --=================================================================================================
SQL> --=================================================================================================
SQL> --=================================================================================================
SQL> --=================================================================================================
SQL> --======================================================================================
SQL> --======================================================================================
SQL> --======================================================================================
SQL> --======================================================================================
SQL> --======================================================================================
SQL> --======================================================================================
SQL> -- MFB FFF +++++++++++++++++++++++++++++++++++++++++++
SQL> --=================================================================================================
SQL> --=================================================================================================
SQL> --=================================================================================================
SQL> -- Exemple de procédures PL/SQL dynamique 
SQL> -- Idem pour les fonctions à quelques exceptions près (CREATE ...)
SQL> SET SERVEROUTPUT ON
SQL> CREATE OR REPLACE PROCEDURE NBRLIGTAB (NOMTAB VARCHAR) IS
Requete VARCHAR(200);
N NUMBER;
-- NBRLIGTAB Compte le nombre de lignes dans une table
BEGIN
  NOMTAB:=UPPER(NOMTAB);
  Requete := 'SELECT COUNT(*) FROM ' || NOMTAB ; -- Pas de ; dans Requete
  EXECUTE IMMEDIATE Requete INTO N;
  DBMS_OUTPUT.put_line(N);
END;
/

Elément Procedure NBRLIGTAB compilé

Errors: check compiler log
Elapsed: 00:00:00.015
SQL> EXEC NBRLIGTAB('TABCLIDS')

Erreur commençant à la ligne: 1 806 de la commande -
EXEC NBRLIGTAB('TABCLIDS')
Rapport d'erreur -
ORA-06550: line 1, column 7:
PLS-00905: object MALEKUS.NBRLIGTAB is invalid
ORA-06550: line 1, column 7:
PL/SQL: Statement ignored
06550. 00000 -  "line %s, column %s:\n%s"
*Cause:    Usually a PL/SQL compilation error.
*Action:
SQL> EXEC NBRLIGTAB('Clients')

Erreur commençant à la ligne: 1 807 de la commande -
EXEC NBRLIGTAB('Clients')
Rapport d'erreur -
ORA-06550: line 1, column 7:
PLS-00905: object MALEKUS.NBRLIGTAB is invalid
ORA-06550: line 1, column 7:
PL/SQL: Statement ignored
06550. 00000 -  "line %s, column %s:\n%s"
*Cause:    Usually a PL/SQL compilation error.
*Action:
SQL> CREATE OR REPLACE PROCEDURE NBRNULLTABCOL (NOMTAB VARCHAR, NOMCOL VARCHAR) IS
Requete VARCHAR(200);
N NUMBER;
-- NBRNULLTABCOL Compte le nombre de valeurs nulles dans une colonne dans une table
BEGIN
  NOMTAB:=UPPER(NOMTAB);
  NOMCOL:=UPPER(NOMCOL);
  Requete := 'SELECT COUNT(*) FROM ' || NOMTAB || ' WHERE ' || NOMCOL || ' IS NULL';
  EXECUTE IMMEDIATE Requete INTO N;
  DBMS_OUTPUT.put_line(N);
END;
/

Elément Procedure NBRNULLTABCOL compilé

Errors: check compiler log
Elapsed: 00:00:00.024
SQL> EXEC NBRNULLTABCOL('Clients','telcli')

Erreur commençant à la ligne: 1 821 de la commande -
EXEC NBRNULLTABCOL('Clients','telcli')
Rapport d'erreur -
ORA-06550: line 1, column 7:
PLS-00905: object MALEKUS.NBRNULLTABCOL is invalid
ORA-06550: line 1, column 7:
PL/SQL: Statement ignored
06550. 00000 -  "line %s, column %s:\n%s"
*Cause:    Usually a PL/SQL compilation error.
*Action:
SQL> --=================================================================================================
SQL> --=================================================================================================
SQL> --=================================================================================================
SQL> --=================================================================================================
SQL> --= Manipulation intelligente des données : Elimination des doubles et des similaires   === DEBUT =
SQL> --=================================================================================================
SQL> --=================================================================================================
SQL> --=================================================================================================
SQL> --=================================================================================================
SQL> -- MFB FFF +++
SQL> /*

Requêtes Ji (PL/SQL Procédures-Fonctions ; pour vérifier la Cohérence globale des données ;
>>>>>>>>>>>>>> Qualité des données

Développez une procédure PL/SQL qui permet déliminer les doubles dans la table des clients !

-- ????????????      FB FB FB FB FB FB A compléter ??????????????

*/
SQL> /*
Entre parenthèses hihi haha FFF ! (...)

Etant donné la table TABCLIDS suivante :
Elle est issue des tables de la BD GesComI... 
Faire les requêtes ci-dessous : 
Eliminer les doubles et les similaires !
*/
SQL> DROP TABLE TABCLIDS ;

Table TABCLIDS supprimé(e).

Elapsed: 00:00:00.017
SQL> CREATE TABLE TABCLIDS (COL1 VARCHAR2(10), COL2 VARCHAR2(12), COL3 VARCHAR2(10), COL4 VARCHAR2(10), COL5 VARCHAR2(1));

Table TABCLIDS créé(e).

Elapsed: 00:00:00.007
SQL> INSERT INTO TABCLIDS VALUES ('2994570', 'Madame', 'RAHMA', 'CLEMENCE', '3');

1 ligne inséré.

Elapsed: 00:00:00.002
SQL> INSERT INTO TABCLIDS VALUES ('2996100', 'Monsieur', 'CLEMENCE', 'ALEXANDRE', '1');

1 ligne inséré.

Elapsed: 00:00:00.002
SQL> INSERT INTO TABCLIDS VALUES ('3000107', 'MO NSIEUR', 'ONRI', 'PANDA', '2');

1 ligne inséré.

Elapsed: 00:00:00.001
SQL> INSERT INTO TABCLIDS VALUES ('2997777', 'Mademoiselle', 'LE BON', 'CLEMENTINE', '1');

1 ligne inséré.

Elapsed: 00:00:00.002
SQL> INSERT INTO TABCLIDS VALUES ('299PPPP', 'Mlle', 'BON', 'CLEMENTINE', '1');

1 ligne inséré.

Elapsed: 00:00:00.001
SQL> INSERT INTO TABCLIDS VALUES ('2997007', 'Monsieur', 'TRAIFOR', 'ADAM', '2');

1 ligne inséré.

Elapsed: 00:00:00.002
SQL> INSERT INTO TABCLIDS VALUES ('2998500', 'Monsieur', 'CHEVALIER', 'INES', '1');

1 ligne inséré.

Elapsed: 00:00:00.002
SQL> INSERT INTO TABCLIDS VALUES ('3000106', 'Monsieur', 'HARISSA', 'FORD', '1');

1 ligne inséré.

Elapsed: 00:00:00.002
SQL> INSERT INTO TABCLIDS VALUES ('3000108', 'Madame', 'EDITE', 'FIAT', '1');

1 ligne inséré.

Elapsed: 00:00:00.001
SQL> INSERT INTO TABCLIDS VALUES ('3000109', 'Madame', 'TOYOTA', 'JACKSON', '3');

1 ligne inséré.

Elapsed: 00:00:00.001
SQL> INSERT INTO TABCLIDS VALUES ('3000111', 'Madame', 'GENEREUX', 'EVE', '1');

1 ligne inséré.

Elapsed: 00:00:00.003
SQL> INSERT INTO TABCLIDS VALUES ('3001778', 'Mr', 'COURTOIS', 'Bruno', '1');

1 ligne inséré.

Elapsed: 00:00:00.001
SQL> INSERT INTO TABCLIDS VALUES ('3001779', 'Monsieur', 'VANDERHOTE', 'Ivan', '1');

1 ligne inséré.

Elapsed: 00:00:00.001
SQL> INSERT INTO TABCLIDS VALUES ('3001780', 'Monsieur', 'Hollanda', 'Francis', '1');

1 ligne inséré.

Elapsed: 00:00:00.002
SQL> INSERT INTO TABCLIDS VALUES ('3001781', 'Monsieur', 'Bernard', 'Hugues', '1');

1 ligne inséré.

Elapsed: 00:00:00.001
SQL> INSERT INTO TABCLIDS VALUES ('3001782', 'Monsieur', 'LATIFOU', 'Ilyas', '1');

1 ligne inséré.

Elapsed: 00:00:00.002
SQL> INSERT INTO TABCLIDS VALUES ('3001783', 'Madame', 'LALLEMAND', 'Ines', '1');

1 ligne inséré.

Elapsed: 00:00:00.001
SQL> INSERT INTO TABCLIDS VALUES ('3001784', 'Monsieur', 'DEUTCH', 'Hans', '1');

1 ligne inséré.

Elapsed: 00:00:00.002
SQL> INSERT INTO TABCLIDS VALUES ('3001785', 'Madame', 'ALMANI', 'Eve', '1');

1 ligne inséré.

Elapsed: 00:00:00.002
SQL> INSERT INTO TABCLIDS VALUES ('3001786', 'Madame', 'MERQUELLE', 'Ange', '1');

1 ligne inséré.

Elapsed: 00:00:00.002
SQL> INSERT INTO TABCLIDS VALUES ('3001', 'M.', 'LE BON', 'Adam', '1');

1 ligne inséré.

Elapsed: 00:00:00.001
SQL> INSERT INTO TABCLIDS VALUES ('3001777', 'Mr', 'LE BON', 'Adem', '1');

1 ligne inséré.

Elapsed: 00:00:00.002
SQL> INSERT INTO TABCLIDS VALUES ('3001777', 'Monsieur', 'LE BON', 'Adam', '1');

1 ligne inséré.

Elapsed: 00:00:00.002
SQL> INSERT INTO TABCLIDS VALUES ('2998505', 'Mademoiselle', 'TRAIFOR', 'ALICE', '2');

1 ligne inséré.

Elapsed: 00:00:00.002
SQL> INSERT INTO TABCLIDS VALUES ('3000110', 'MADAME', 'ONRI', 'HONDA', '2');

1 ligne inséré.

Elapsed: 00:00:00.001
SQL> INSERT INTO TABCLIDS VALUES ('3001777', 'Monsieur', 'LE BON', 'Adam', '1');

1 ligne inséré.

Elapsed: 00:00:00.001
SQL> INSERT INTO TABCLIDS VALUES ('3001777', 'Monsieur', 'LE BON', 'Adam', '1');

1 ligne inséré.

Elapsed: 00:00:00.001
SQL> INSERT INTO TABCLIDS VALUES ('3001777', 'Monsieur', 'LE BON', 'Adam', '');

1 ligne inséré.

Elapsed: 00:00:00.001
SQL> INSERT INTO TABCLIDS VALUES ('3001777', 'Monsieur', 'LE BON', 'Adam', '1');

1 ligne inséré.

Elapsed: 00:00:00.002
SQL> INSERT INTO TABCLIDS VALUES ('3001777', 'Monsieùr', 'LE BON', 'Adam', '1');

1 ligne inséré.

Elapsed: 00:00:00.001
SQL> INSERT INTO TABCLIDS VALUES ('2994570', 'Madame', 'RAHMA', 'CLEMENCE', '3');

1 ligne inséré.

Elapsed: 00:00:00.001
SQL> INSERT INTO TABCLIDS VALUES ('2994570', 'Madame', 'RAHMA', 'CLEMENCE', '3');

1 ligne inséré.

Elapsed: 00:00:00.001
SQL> INSERT INTO TABCLIDS VALUES ('2994570', 'Madame', 'RAHMA', 'CLEMENSE', '3');

1 ligne inséré.

Elapsed: 00:00:00.002
SQL> INSERT INTO TABCLIDS VALUES ('2997007', '', 'TRAIFOR', 'ADAM', '2');

1 ligne inséré.

Elapsed: 00:00:00.001
SQL> INSERT INTO TABCLIDS VALUES ('2997007', '', 'TRAIFOR', 'ADAM', '');

1 ligne inséré.

Elapsed: 00:00:00.001
SQL> COMMIT;
Validation (commit) terminée.
Elapsed: 00:00:00.001
SQL> --======================================================================================
SQL> REM VISUALISATION DES DONNEES
SQL> SELECT COUNT(*) AS NbrCli FROM TABCLIDS;

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          Requete:lesarticlesquisonttoujourscommandésensemble                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           
=========================================================================                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        
    NBRCLI
----------
        35

Elapsed: 00:00:00.008
SQL> SELECT * FROM TABCLIDS;

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          Requete:lesarticlesquisonttoujourscommandésensemble                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           
=========================================================================                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        
COL1       COL2         COL3       COL4       C
---------- ------------ ---------- ---------- -
2994570    Madame       RAHMA      CLEMENCE   3
2996100    Monsieur     CLEMENCE   ALEXANDRE  1
3000107    MO NSIEUR    ONRI       PANDA      2
2997777    Mademoiselle LE BON     CLEMENTINE 1
299PPPP    Mlle         BON        CLEMENTINE 1
2997007    Monsieur     TRAIFOR    ADAM       2
2998500    Monsieur     CHEVALIER  INES       1
3000106    Monsieur     HARISSA    FORD       1
3000108    Madame       EDITE      FIAT       1
3000109    Madame       TOYOTA     JACKSON    3
3000111    Madame       GENEREUX   EVE        1
3001778    Mr           COURTOIS   Bruno      1
3001779    Monsieur     VANDERHOTE Ivan       1
3001780    Monsieur     Hollanda   Francis    1
3001781    Monsieur     Bernard    Hugues     1
3001782    Monsieur     LATIFOU    Ilyas      1
3001783    Madame       LALLEMAND  Ines       1
3001784    Monsieur     DEUTCH     Hans       1
3001785    Madame       ALMANI     Eve        1
3001786    Madame       MERQUELLE  Ange       1
3001       M.           LE BON     Adam       1
3001777    Mr           LE BON     Adem       1
3001777    Monsieur     LE BON     Adam       1
2998505    Mademoiselle TRAIFOR    ALICE      2
3000110    MADAME       ONRI       HONDA      2
3001777    Monsieur     LE BON     Adam       1
3001777    Monsieur     LE BON     Adam       1
3001777    Monsieur     LE BON     Adam        
3001777    Monsieur     LE BON     Adam       1
3001777    Monsieùr     LE BON     Adam       1
2994570    Madame       RAHMA      CLEMENCE   3
2994570    Madame       RAHMA      CLEMENCE   3
2994570    Madame       RAHMA      CLEMENSE   3
2997007                 TRAIFOR    ADAM       2
2997007                 TRAIFOR    ADAM        

 35 lignes sélectionnées 

Elapsed: 00:00:00.011
SQL> REM ??? Que font les commandes SQL ci-dessous ?
SQL> SELECT COUNT(DISTINCT *) FROM TABCLIDS ;

Erreur commençant à la ligne: 1 904 de la commande -
SELECT COUNT(DISTINCT *) FROM TABCLIDS
Erreur à la ligne de commande: 1 904 Colonne: 23
Rapport d'erreur -
Erreur SQL : ORA-00936: missing expression
00936. 00000 -  "missing expression"
*Cause:    
*Action:
Elapsed: 00:00:00.010
SQL> SELECT DISTINCT * FROM TABCLIDS ;

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          Requete:lesarticlesquisonttoujourscommandésensemble                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           
=========================================================================                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        
COL1       COL2         COL3       COL4       C
---------- ------------ ---------- ---------- -
2998500    Monsieur     CHEVALIER  INES       1
3000109    Madame       TOYOTA     JACKSON    3
3001786    Madame       MERQUELLE  Ange       1
3001777    Monsieur     LE BON     Adam       1
3000110    MADAME       ONRI       HONDA      2
2996100    Monsieur     CLEMENCE   ALEXANDRE  1
299PPPP    Mlle         BON        CLEMENTINE 1
3000106    Monsieur     HARISSA    FORD       1
3000111    Madame       GENEREUX   EVE        1
3001       M.           LE BON     Adam       1
3001777    Mr           LE BON     Adem       1
2997777    Mademoiselle LE BON     CLEMENTINE 1
3001784    Monsieur     DEUTCH     Hans       1
3001785    Madame       ALMANI     Eve        1
2994570    Madame       RAHMA      CLEMENCE   3
2997007    Monsieur     TRAIFOR    ADAM       2
3001778    Mr           COURTOIS   Bruno      1
3001779    Monsieur     VANDERHOTE Ivan       1
3001782    Monsieur     LATIFOU    Ilyas      1
2994570    Madame       RAHMA      CLEMENSE   3
2997007                 TRAIFOR    ADAM        
3001780    Monsieur     Hollanda   Francis    1
2997007                 TRAIFOR    ADAM       2
3000107    MO NSIEUR    ONRI       PANDA      2
3000108    Madame       EDITE      FIAT       1
3001777    Monsieur     LE BON     Adam        
3001781    Monsieur     Bernard    Hugues     1
3001783    Madame       LALLEMAND  Ines       1
2998505    Mademoiselle TRAIFOR    ALICE      2
3001777    Monsieùr     LE BON     Adam       1

 30 lignes sélectionnées 

Elapsed: 00:00:00.011
SQL> -- ????????????      FB FB FB FB FB FB A compléter ??????????????
SQL> -- A VOUS ! -- BON COURAGE -- MFB
SQL> -- ????????????      FB FB FB FB FB FB A compléter ??????????????
SQL> rem *************************************************************************************
SQL> rem *************************************************************************************
SQL> rem 
SQL> rem *******************  Elimination des doubles exacts  ********************************
SQL> rem 
SQL> rem *************************************************************************************
SQL> rem procedure d élimination des doubles exacts sur plusieurs attributs 
SQL> CREATE OR REPLACE PROCEDURE elimine_double(tabdep VARCHAR2, tabarr VARCHAR2, atts VARCHAR2)
IS

requete VARCHAR2(500);
debut NUMBER;
fin NUMBER;

BEGIN
--requete := 'DROP TABLE ' || tabarr ;
--EXECUTE IMMEDIATE requete;
requete := 'CREATE TABLE ' || tabarr || ' AS SELECT DISTINCT * FROM ' || tabdep || ' ORDER BY ' || atts ;
requete := 'CREATE TABLE ' || tabarr || ' AS SELECT DISTINCT * FROM ' || tabdep ;
debut:=dbms_utility.get_time;
EXECUTE IMMEDIATE requete;
fin:=dbms_utility.get_time;
dbms_output.put_line((fin-debut)/100);
END;
/

Elément Procedure ELIMINE_DOUBLE compilé

Elapsed: 00:00:00.007
SQL> --======================================================================================
SQL> --======================================================================================
SQL> --======================================================================================
SQL> --======================================================================================
SQL> -- Beaucoup d'autres BIG PROBLEM se posent : 
SQL> -- Les performances ! Le temps de réponse sur les gros volumes de données les BIG DATA !
SQL> -- Beaucoup d'autres BIG PROBLEM se posent : 
SQL> -- Le choix des attributs clés qui servent pour l'élimination (le MATCH) !
SQL> -- Beaucoup d'autres BIG PROBLEM se posent : 
SQL> -- Que faire des attributs NON clés qui ne servent pour l'élimination (le MERGE) !
SQL> -- ======================================================
SQL> -- ======================================================
SQL> REM -- Elimination des doubles et des similaires
SQL> REM -- Matching, Merging, and Deduplication
SQL> -- ======================================================
SQL> -- ======================================================
SQL> REM -- Professeur : Mr M. F. Boufarès
SQL> REM -- Big Data, Bases de Données Avancées, Entrepôts de données
SQL> -- ======================================================
SQL> /*
-- Algo Data Deduplication + (DD+) [M. F. Boufarès Octobre 2018]


The DD + agorithm consists in splitting the data source into several blocks.
Then sort and clean each block independently of the others.
Finally, merge the blocks to perform deduplication.
This logic corresponds perfectly to the BigData MapReduce paradigm.
In addition, two functions should be developed which are the basis of all comparisons of similar VALUES:
- Match to compare the rows between them on the designated columns (double exact or similar),
- Merge to eliminate exact doubles or merge similar.
Intelligent processing should be done to designate the columns that are used for deduplication.



Algorithm DD+
Input : 
F : a set of rows/lines, the data source with anomalies
K : a set of columns that serve for deduplication (Key attributes)
Output :
FPrim : a final set of rows, the result of data deduplication process
FInter : a set of rows for intermediate results

Begin
N = Number of initial tuples in F
M = Memory size (M is much smaller than N)
B = Number of blocks B=[N/M] ent-sup

Example : 
The file F contains 8 VALUES ; N=8
F = d, b, a, b, a, c, a, b
The memory size is M=3 
The the number of Blocks is B=3

-- Cutting FROM F to B blocks
CreateSortedBlocks(F,N,M,B,K);

3 Files/Blocks are created (F1, F2 and F3)
F1 = a, b, d
F2 = a, b, c
F3 = a, b

-- Merge sorted blocks to build the final result
MergeSortedBlocks(B,FInter,FPrim);
END Algorithm DD+

----------------
Procedure CreateSortedBlocks
BEGIN

END;

----------------
Procedure MinimumValue
BEGIN

END;

----------------
Procedure MergeSortedBlocks
BEGIN
 
END;

Etc...

*/
SQL> --=================================================================================================
SQL> --=================================================================================================
SQL> --=================================================================================================
SQL> --= Manipulation intelligente des données : Elimination des doubles et des similaires   ==== FIN ==
SQL> --=================================================================================================
SQL> --=================================================================================================
SQL> --=================================================================================================
SQL> --=================================================================================================
SQL> -- MFB FFF +++
SQL> --=================================================================================================
SQL> --=================================================================================================
SQL> --=================================================================================================
SQL> --= Manipulation intelligente des données : Qu'est-ce un système de recommandation  ====== DEBUT ==
SQL> --=================================================================================================
SQL> --=================================================================================================
SQL> --=================================================================================================
SQL> --=================================================================================================
SQL> -- MFB FFF +++
SQL> /*
FB6.1. Construisez la vue « Vi » qui contient les articles commandés par un client donné « Ci »
(pour une période donnée, exemple septembre 2018).
Généralisez dans une procédure PL/SQL !
*/
SQL> /*
FB6.2. Construisez la vue « Vij » qui contient les articles commandés à la fois 
par les deux clients « Ci » et « Cj ».
On pourrait considérer que les deux clients « Ci » et « Cj » sont « amis-voisins » 
si et seulement si la vue « Vij » est non vide (ou 90%)!
On pourra généraliser pour l'ensemble des amis de « Ci » (Clustering...!)

On pourrait alors recommander ou proposer à l'un des deux clients, soit « Cj », 
les articles de « Ci » -son ami- qu'il n'a pas commandés !

On pourrait aussi recommander ou proposer à l'un des deux clients, soit « Cj », 
les articles de « Ci » -son ami- qu'il n'a pas commandés + 
mais qui doivent appartenir à la même catégorie !

Discussions & Généralisation !

*/
SQL> -- ????????????      FB FB FB FB FB FB A compléter ??????????????
SQL> --====================  Le début d'un système de recommandation  ==================================
SQL> --====================  Classification des clients selon les articles commandés ===================
SQL> -- Les articles commandés par les clients !
SQL> -- On pourrait ne s'intéresser qu'à certains clients et certains articles
SQL> -- (c-a-d : Certains CODCLI des clients ; Certains REFART des articles...)
SQL> -- On pourrait ne s'intéresser qu'à certaines commandes
SQL> -- (c-a-d : Certains NUMCOM des commandes...)
SQL> -- Les articles commandés pendant la période concernée (SEP 2018).
SQL> CREATE OR REPLACE VIEW V_CLIARTQTE (CLIENT, ARTICLE, QUANTITE) AS
SELECT K.CODCLI, D.REFART, SUM(D.QTCOM) FROM COMMANDES K, DETAILCOM D
WHERE K.NUMCOM = D.NUMCOM
AND K.DATCOM >= 'SATURDAY 01-SEPTEMBER-2018' 
AND K.DATCOM <= 'SUNDAY 30-SEPTEMBER-2018'
GROUP BY K.CODCLI, D.REFART
ORDER BY 1, 2;

View V_CLIARTQTE créé(e).

Elapsed: 00:00:00.008
SQL> SELECT * FROM V_CLIARTQTE ;

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          Requete:lesarticlesquisonttoujourscommandésensemble                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           
=========================================================================                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        
CLIENT     ARTICLE      QUANTITE
---------- ---------- ----------
C001       FB.001              8
C001       FB.002              3
C001       FB.003              1
C002       FB.001              1
C002       FB.002              1
C002       FB.003              1
C004       FB.002              3
C004       FB.003              3
C009       FB.001              5
C010       FB.001              1
C011       FB.001              2
C012       FB.001              7
C013       FB.001              3
C013       FB.002              1
C014       FB.001              2
C014       FB.002              1

 16 lignes sélectionnées 

Elapsed: 00:00:00.025
SQL> -- Pour tout client Ci AYANT SATISFAIT certains critères !
SQL> --Les articles commandés par le client C001.
SQL> CREATE OR REPLACE VIEW V_C001 AS
SELECT * FROM V_CLIARTQTE
WHERE CLIENT = 'C001';

View V_C001 créé(e).

Elapsed: 00:00:00.011
SQL> --Les articles commandés par le client C002.
SQL> CREATE OR REPLACE VIEW V_C002 AS
SELECT * FROM V_CLIARTQTE
WHERE CLIENT = 'C002';

View V_C002 créé(e).

Elapsed: 00:00:00.010
SQL> --Les articles commandés par le client C003.
SQL> CREATE OR REPLACE VIEW V_C003 AS
SELECT * FROM V_CLIARTQTE
WHERE CLIENT = 'C003';

View V_C003 créé(e).

Elapsed: 00:00:00.008
SQL> -- Etc...
SQL> --Les articles commandés par le client C006.
SQL> CREATE OR REPLACE VIEW V_C006 AS
SELECT * FROM V_CLIARTQTE
WHERE CLIENT = 'C006';

View V_C006 créé(e).

Elapsed: 00:00:00.010
SQL> -- Etc...
SQL> -- Les articles commandés, à la fois, par les clients C001 et C002.
SQL> -- 1ère Solution : Les articles commandés, à la fois, par les clients C001 et C002.
SQL> CREATE OR REPLACE VIEW V_C001_C002_A (ARTICLE) AS
SELECT ARTICLE FROM V_C001
INTERSECT
SELECT ARTICLE FROM V_C002;

View V_C001_C002_A créé(e).

Elapsed: 00:00:00.010
SQL> SELECT * FROM V_C001_C002_A;

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          Requete:lesarticlesquisonttoujourscommandésensemble                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           
=========================================================================                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        
ARTICLE  
----------
FB.001    
FB.002    
FB.003    

Elapsed: 00:00:00.017
SQL> CREATE OR REPLACE VIEW V_C001_C002_A (ARTICLE) AS
SELECT ARTICLE FROM V_C001
WHERE ARTICLE IN (SELECT ARTICLE FROM V_C002);

View V_C001_C002_A créé(e).

Elapsed: 00:00:00.008
SQL> SELECT * FROM V_C001_C002_A;

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          Requete:lesarticlesquisonttoujourscommandésensemble                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           
=========================================================================                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        
ARTICLE  
----------
FB.001    
FB.002    
FB.003    

Elapsed: 00:00:00.030
SQL> -- Les articles commandés, à la fois, par les clients C001 et C002.
SQL> -- 2ème Solution : Les articles commandés, à la fois, par les clients C001 et C002.
SQL> CREATE OR REPLACE VIEW V_C001_C002_B (CLIG, ARTG, QTEG, CLID, ARTD, QTED) AS
SELECT X.CLIENT, X.ARTICLE, X.QUANTITE, Y.CLIENT, Y.ARTICLE, Y.QUANTITE
FROM V_C001 X, V_C002 Y
WHERE X.ARTICLE = Y.ARTICLE ;

View V_C001_C002_B créé(e).

Elapsed: 00:00:00.011
SQL> -- Remarque : Que faut-il faire pour les articles qui sont commandés par l'un mais pas par l'autre?
SQL> -- Les articles commandés, à la fois, par les clients C001 et C003.
SQL> -- 2ème Solution : Les articles commandés, à la fois, par les clients C001 et C003.
SQL> CREATE OR REPLACE VIEW V_C001_C003_B (CLIG, ARTG, QTEG, CLID, ARTD, QTED) AS
SELECT X.CLIENT, X.ARTICLE, X.QUANTITE, Y.CLIENT, Y.ARTICLE, Y.QUANTITE
FROM V_C001 X, V_C002 Y
WHERE X.ARTICLE = Y.ARTICLE ;

View V_C001_C003_B créé(e).

Elapsed: 00:00:00.009
SQL> -- Remarque : Que faut-il faire pour les articles qui sont commandés par l'un mais pas par l'autre?
SQL> -- Le nombre d''articles communs à C001 et C002
SQL> SELECT COUNT(*) AS NCOMM1 FROM V_C001_C002_B;

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          Requete:lesarticlesquisonttoujourscommandésensemble                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           
=========================================================================                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        
    NCOMM1
----------
         3

Elapsed: 00:00:00.014
SQL> -- Si NCOMM1 > n Alors C001 et C002 sont "amis" font partie de la même classe-(groupe-cluster)
SQL> -- Comment calculer n ?
SQL> -- n pourrait-être égal à p% du max des cardinalités des vues !
SQL> -- On recommande (on propose) alors à C002 les articles de C001 qu''il n''a pas commandés :
SQL> SELECT ARTICLE FROM V_C001
MINUS
SELECT ARTICLE FROM V_C002;

aucune ligne sélectionnée


Elapsed: 00:00:00.008
SQL> -- On recommande (on propose) alors à C001 les articles de C002 qu''il n''a pas commandés :
SQL> SELECT ARTICLE FROM V_C002
MINUS
SELECT ARTICLE FROM V_C001;

aucune ligne sélectionnée


Elapsed: 00:00:00.010
SQL> -- ????????????      FB FB FB FB FB FB A compléter ??????????????
SQL> --=================================================================================================
SQL> --=================================================================================================
SQL> --=================================================================================================
SQL> --= Manipulation intelligente des données : Qu'est-ce un système de recommandation  ====== FIN ====
SQL> --=================================================================================================
SQL> --=================================================================================================
SQL> --=================================================================================================
SQL> --=================================================================================================
SQL> --======================================================================================
SQL> --======================================================================================
SQL> --======================================================================================
SQL> --======================================================================================
SQL> --======================================================================================
SQL> --======================================================================================
SQL> -- MFB FFF +++++++++++++++++++++++++++++++++++++++++++ ****** === ****** +++++++++++++++
SQL> --======================================================================================
SQL> --======================================================================================
SQL> --======================================================================================
SQL> /*
    CREATION DUN SYSTEME DE RECOMMANDATION BASE SUR LES ARTICLES COMMANDES EN COMMUN
*/
SQL> CREATE OR REPLACE VIEW CombinaisonClient(Client1, Client2) as select A.codCli, B.codCli from clients A, clients B where A.codCli < B.codCli;

View COMBINAISONCLIENT créé(e).

Elapsed: 00:00:00.006
SQL> CREATE OR REPLACE PROCEDURE vueArticleDuClient(codeClient IN VARCHAR, dateDebut IN VARCHAR, dateFin IN VARCHAR)
as
    req VARCHAR(2000) := '';
BEGIN
    req := 'CREATE OR REPLACE VIEW V_' || codeClient || '(CLIENT, ARTICLE, QUANTITE) AS SELECT K.CODCLI, D.REFART, SUM(D.QTCOM) FROM COMMANDES K, DETAILCOM D WHERE K.NUMCOM = D.NUMCOM AND K.DATCOM >= ''' || dateDebut || ''' AND K.DATCOM <= ''' || dateFin || ''' AND K.CODCLI = ''' || codeClient || ''' GROUP BY K.CODCLI, D.REFART ORDER BY 1, 2';
    EXECUTE IMMEDIATE req;
END;
/

Elément Procedure VUEARTICLEDUCLIENT compilé

Elapsed: 00:00:00.007
SQL> CREATE OR REPLACE PROCEDURE vueArticleDesClients(codeClient1 IN VARCHAR, dateDebut1 IN VARCHAR, dateFin1 IN VARCHAR, codeClient2 IN VARCHAR, dateDebut2 IN VARCHAR, dateFin2 IN VARCHAR)
as
    req VARCHAR(2000) := '';
BEGIN
    vueArticleDuClient(codeClient1,dateDebut1,dateFin1);
    vueArticleDuClient(codeClient2,dateDebut2,dateFin2);
    req := 'CREATE OR REPLACE VIEW V_'||codeClient1||'_'||codeClient2||'_A (ARTICLE) AS SELECT ARTICLE FROM V_'||codeClient1||' INTERSECT SELECT ARTICLE FROM V_'||codeClient2;
    EXECUTE IMMEDIATE req;
END;
/

Elément Procedure VUEARTICLEDESCLIENTS compilé

Elapsed: 00:00:00.005
SQL> CREATE OR REPLACE PROCEDURE vueArticleNonDesClients(codeClient1 IN VARCHAR, dateDebut1 IN VARCHAR, dateFin1 IN VARCHAR, codeClient2 IN VARCHAR, dateDebut2 IN VARCHAR, dateFin2 IN VARCHAR)
as
    req VARCHAR(2000) := '';
BEGIN
    vueArticleDuClient(codeClient1,dateDebut1,dateFin1);
    vueArticleDuClient(codeClient2,dateDebut2,dateFin2);
    req := 'CREATE OR REPLACE VIEW V_Non_'||codeClient1||'_'||codeClient2||'_A (ARTICLE) AS SELECT ARTICLE FROM V_'||codeClient1||' MINUS SELECT ARTICLE FROM V_'||codeClient2;
    EXECUTE IMMEDIATE req;
    req := 'CREATE OR REPLACE VIEW V_Non_'||codeClient2||'_'||codeClient1||'_A (ARTICLE) AS SELECT ARTICLE FROM V_'||codeClient2||' MINUS SELECT ARTICLE FROM V_'||codeClient1;
    EXECUTE IMMEDIATE req;
END;
/

Elément Procedure VUEARTICLENONDESCLIENTS compilé

Elapsed: 00:00:00.006
SQL> exec vueArticleNonDesClients('C001', 'SATURDAY 01-SEPTEMBER-2018' ,'SUNDAY 30-SEPTEMBER-2018', 'C002', 'SATURDAY 01-SEPTEMBER-2018' ,'SUNDAY 30-SEPTEMBER-2018')

Procédure PL/SQL terminée.

SQL> select * from SYS.V_NON_C001_C002_A;

Erreur commençant à la ligne: 2 240 de la commande -
select * from SYS.V_NON_C001_C002_A
Erreur à la ligne de commande: 2 240 Colonne: 19
Rapport d'erreur -
Erreur SQL : ORA-00942: table or view does not exist
00942. 00000 -  "table or view does not exist"
*Cause:    
*Action:
Elapsed: 00:00:00.009
SQL> select * from SYS.V_NON_C002_C001_A;

Erreur commençant à la ligne: 2 241 de la commande -
select * from SYS.V_NON_C002_C001_A
Erreur à la ligne de commande: 2 241 Colonne: 19
Rapport d'erreur -
Erreur SQL : ORA-00942: table or view does not exist
00942. 00000 -  "table or view does not exist"
*Cause:    
*Action:
Elapsed: 00:00:00.009
SQL> CREATE OR REPLACE FUNCTION getNbArtCm(c1 IN VARCHAR, c2 IN VARCHAR)
RETURN NUMBER AS
    nbArtCm NUMBER := 0;
BEGIN
    EXECUTE IMMEDIATE 'SELECT COUNT(*) FROM V_' || c1 || '_' || c2 || '_A'
    INTO nbArtCm;
    return nbArtCm;
END;
/

Elément Function GETNBARTCM compilé

Elapsed: 00:00:00.005
SQL> CREATE TABLE totalArticleCommun(client1 VARCHAR(30), client2 VARCHAR(30), nbArtCm NUMBER);

Erreur commençant à la ligne: 2 253 de la commande -
CREATE TABLE totalArticleCommun(client1 VARCHAR(30), client2 VARCHAR(30), nbArtCm NUMBER)
Rapport d'erreur -
Erreur SQL : ORA-00955: name is already used by an existing object
00955. 00000 -  "name is already used by an existing object"
*Cause:    
*Action:
Elapsed: 00:00:00.009
SQL> CREATE OR REPLACE PROCEDURE systemeRecommandation(pourcentageAmi IN NUMBER, dateDebut IN VARCHAR, dateFin IN VARCHAR)
as
    req VARCHAR(2000) := '';
    reqIn VARCHAR(2000) := '';
    nbArticle NUMBER := 0;
BEGIN
    -- Suppresion et Création de la table qui va contenir les articles qu'on les clients en commun
    EXECUTE IMMEDIATE 'DROP TABLE totalArticleCommun';
    EXECUTE IMMEDIATE 'CREATE TABLE totalArticleCommun(client1 VARCHAR(30), client2 VARCHAR(30), nbArtCm NUMBER)';
    -- Parcours sur tous les clients pour creer une vue Vij avec i et j des clients différents
    FOR mesClients in (SELECT * FROM combinaisonClient) LOOP
        vueArticleDesClients(''||mesClients.client1||'', dateDebut, dateFin, ''||mesClients.client2||'', dateDebut, dateFin);
        req := 'SELECT COUNT(*) FROM V_' || mesClients.client1 || '_' || mesClients.client2 || '_A';
        EXECUTE IMMEDIATE req
        INTO nbArticle;
        reqIn := 'INSERT INTO totalArticleCommun values (''' || mesClients.client1 || ''', ''' || mesClients.client2 || ''', ' || nbArticle || ')';
        EXECUTE IMMEDIATE reqIn;
    END LOOP;
    -- On cree une vue avec les clietns et le nombre d'article en commun
    EXECUTE IMMEDIATE 'CREATE OR REPLACE VIEW V_NBArtCm (client1, client2, nbArtCm) as (select client1, client2, (select getNbArtCm(client1, client2) from dual) from CombinaisonClient)';
    -- Et pour finir on creer une vue qui est composé que des clients qui possède un nombre d'article supérieur au seuil définir.
    -- Ces clients sont considérer comme Ami
    EXECUTE IMMEDIATE 'CREATE OR REPLACE VIEW V_RcmdAmi (client1, client2) as select client1, client2 from (select client1, client2, nbArtCm from V_NBArtCm group by client1, client2, nbArtCm having nbArtCm >=   (select FLOOR(max(nbArtCm) * ' || pourcentageAmi || ' / 100) from V_NBArtCm)) order by client1, client2';
END;
/

Elément Procedure SYSTEMERECOMMANDATION compilé

Elapsed: 00:00:00.024
SQL> exec systemeRecommandation(80, 'SATURDAY 01-SEPTEMBER-2018' ,'SUNDAY 30-SEPTEMBER-2018')

Procédure PL/SQL terminée.

SQL> select * from V_RcmdAmi;

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          Requete:lesarticlesquisonttoujourscommandésensemble                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           
=========================================================================                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        
CLIENT1    CLIENT2  
---------- ----------
C001       C002      
C001       C004      
C001       C013      
C001       C014      
C002       C004      
C002       C013      
C002       C014      
C013       C014      

 8 lignes sélectionnées 

Elapsed: 00:00:00.827
SQL> COMMIT;
Validation (commit) terminée.
Elapsed: 00:00:00.001
SQL> SET TIMING OFF
SQL> SPOOL OFF
